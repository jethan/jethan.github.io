<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="OzPDRGF07x" />
  
  <title>jdk8ğŸ’—ç‰¹æ€§ | å­¦æµ·æ— æ¶¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æœ¬æ–‡ç¿»è¯‘æ•´ç†è‡ª https://github.com/winterbe/java8-tutorial  å¸Œæœ›é˜…è¯»å®Œæœ¬æ–‡çš„å°ä¼™ä¼´èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡å’Œåº”ç”¨ Java8 çš„å„ç§ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºåœ¨å·¥ä½œä¸­çš„ä¸€é—¨åˆ©å™¨ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å¯ Java8 æ–°ç‰¹æ€§ä¹‹æ—…å§ï¼  æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•Java 8 å…è®¸æˆ‘ä»¬é€šè¿‡ default å…³é”®å­—å¯¹æ¥å£ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ã€‚ è¯·çœ‹ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š">
<meta name="keywords" content="jdk8">
<meta property="og:type" content="article">
<meta property="og:title" content="jdk8ğŸ’—ç‰¹æ€§">
<meta property="og:url" content="http://jethan.bid/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/index.html">
<meta property="og:site_name" content="å­¦æµ·æ— æ¶¯">
<meta property="og:description" content="æœ¬æ–‡ç¿»è¯‘æ•´ç†è‡ª https://github.com/winterbe/java8-tutorial  å¸Œæœ›é˜…è¯»å®Œæœ¬æ–‡çš„å°ä¼™ä¼´èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡å’Œåº”ç”¨ Java8 çš„å„ç§ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºåœ¨å·¥ä½œä¸­çš„ä¸€é—¨åˆ©å™¨ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å¯ Java8 æ–°ç‰¹æ€§ä¹‹æ—…å§ï¼  æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•Java 8 å…è®¸æˆ‘ä»¬é€šè¿‡ default å…³é”®å­—å¯¹æ¥å£ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ã€‚ è¯·çœ‹ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š">
<meta property="og:image" content="http://jet-han.oschina.io/img/icons/java.jpg">
<meta property="og:updated_time" content="2017-12-12T08:11:06.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="jdk8ğŸ’—ç‰¹æ€§">
<meta name="twitter:description" content="æœ¬æ–‡ç¿»è¯‘æ•´ç†è‡ª https://github.com/winterbe/java8-tutorial  å¸Œæœ›é˜…è¯»å®Œæœ¬æ–‡çš„å°ä¼™ä¼´èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡å’Œåº”ç”¨ Java8 çš„å„ç§ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºåœ¨å·¥ä½œä¸­çš„ä¸€é—¨åˆ©å™¨ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å¯ Java8 æ–°ç‰¹æ€§ä¹‹æ—…å§ï¼  æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•Java 8 å…è®¸æˆ‘ä»¬é€šè¿‡ default å…³é”®å­—å¯¹æ¥å£ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ã€‚ è¯·çœ‹ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š">
<meta name="twitter:image" content="http://jet-han.oschina.io/img/icons/java.jpg">
  
    <link rel="alternative" href="/atom.xml" title="å­¦æµ·æ— æ¶¯" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.png">
  
  
      <link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">
  
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  
  
      <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  
  <!-- åŠ è½½ç‰¹æ•ˆ -->
    <script src="/js/pace.js"></script>
    <link href="/css/pace/pace-theme-flash.css" rel="stylesheet" />
  <script>
      var yiliaConfig = {
          rootUrl: '/',
          fancybox: true,
          animate: true,
          isHome: false,
          isPost: true,
          isArchive: false,
          isTag: false,
          isCategory: false,
          open_in_new: false
      }
  </script>
  <script src="https://echarts.baidu.com/dist/echarts.common.min.js"></script>
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay">
<a href="https://github.com/jethan/blog" style="cursor: hand;z-index: 9999999!important" rel="external nofollow noopener noreferrer" target="_blank">
         <img style="position: absolute; top: 0; border: 0; transform: rotate(-90deg);" src="http://jet-han.oschina.io/img/icons/fork.png"
         alt="Fork me on GitHub">
</a>
</div>
<div class="intrude-less">
    <header id="header" class="inner">  
        <a href="/" class="profilepic">
            
            <img lazy-src="/img/ali.jpg" class="js-avatar">
            
        </a>

        <hgroup>
          <h1 class="header-author"><a href="/" title="Hi Mate">Jet</a></h1>
        </hgroup>

        
        <p class="header-subtitle">æŠ€æœ¯åšå®¢</p>
        
        
        
        <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=225 height=86 src="//music.163.com/outchain/player?type=2&id=482792397&auto=0&height=66"></iframe>
        

        
            <form>
                <input type="text" class="st-default-search-input search" id="search" placeholder=" Search...">
            </form>
        
        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>èœå•</li>
                        <li>æ ‡ç­¾</li>
                        
                        <li>å‹æƒ…é“¾æ¥</li>
                        
                        
                        <li>å…³äºæˆ‘</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">é¦–é¡µ</a></li>
                        
                            <li><a href="/archives">å½’æ¡£</a></li>
                        
                            <li><a href="/photos">ç›¸å†Œ</a></li>
                        
                            <li><a href="http://markdown.xiaoshujiang.com/">ç¼–è¾‘å™¨</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fl github" target="_blank" href="https://github.com/jethan" title="github">github</a>
                            
                                <a class="fl zhihu" target="_blank" href="https://www.zhihu.com/people/jet-77-36" title="zhihu">zhihu</a>
                            
                                <a class="fl weibo" target="_blank" href="http://weibo.com/2146269010/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
                            
                                <a class="fl oschina" target="_blank" href="http://git.oschina.net/jet-han" title="oschina">oschina</a>
                            
                                <a class="fl twitter" target="_blank" href="https://twitter.com/fajie_han" title="twitter">twitter</a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <a href="/tags/" style="font-size: 20px;">==</a> <a href="/tags/AOF/" style="font-size: 10px;">AOF</a> <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/ArrayList/" style="font-size: 10px;">ArrayList</a> <a href="/tags/Arrays/" style="font-size: 10px;">Arrays</a> <a href="/tags/B-Treeç´¢å¼•/" style="font-size: 10px;">B-Treeç´¢å¼•</a> <a href="/tags/Beançš„ä½œç”¨åŸŸ/" style="font-size: 10px;">Beançš„ä½œç”¨åŸŸ</a> <a href="/tags/Beançš„ç”Ÿå‘½å‘¨æœŸ/" style="font-size: 10px;">Beançš„ç”Ÿå‘½å‘¨æœŸ</a> <a href="/tags/Collection/" style="font-size: 10px;">Collection</a> <a href="/tags/Collections/" style="font-size: 10px;">Collections</a> <a href="/tags/CountDownLatch/" style="font-size: 10px;">CountDownLatch</a> <a href="/tags/CyclicBarrier/" style="font-size: 10px;">CyclicBarrier</a> <a href="/tags/Factory-Pattern/" style="font-size: 10px;">Factory Pattern</a> <a href="/tags/Generics/" style="font-size: 10px;">Generics</a> <a href="/tags/HEAP/" style="font-size: 10px;">HEAP</a> <a href="/tags/HashMap/" style="font-size: 10px;">HashMap</a> <a href="/tags/HashSet/" style="font-size: 10px;">HashSet</a> <a href="/tags/HashTable/" style="font-size: 10px;">HashTable</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/IO/" style="font-size: 10px;">IO</a> <a href="/tags/IOC/" style="font-size: 10px;">IOC</a> <a href="/tags/ISAM/" style="font-size: 10px;">ISAM</a> <a href="/tags/Innodb/" style="font-size: 10px;">Innodb</a> <a href="/tags/Intercepting-Filter-Pattern/" style="font-size: 10px;">Intercepting Filter Pattern</a> <a href="/tags/Iterator-Pattern/" style="font-size: 10px;">Iterator Pattern</a> <a href="/tags/LinkedHashMap/" style="font-size: 10px;">LinkedHashMap</a> <a href="/tags/LinkedList/" style="font-size: 10px;">LinkedList</a> <a href="/tags/MVC-Pattern/" style="font-size: 10px;">MVC Pattern</a> <a href="/tags/Map/" style="font-size: 10px;">Map</a> <a href="/tags/MapperScannerConfigurer/" style="font-size: 10px;">MapperScannerConfigurer</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/MyIsam/" style="font-size: 10px;">MyIsam</a> <a href="/tags/Proxy-Pattern/" style="font-size: 10px;">Proxy Pattern</a> <a href="/tags/RDB/" style="font-size: 10px;">RDB</a> <a href="/tags/ReentrantLock/" style="font-size: 10px;">ReentrantLock</a> <a href="/tags/Semaphore/" style="font-size: 10px;">Semaphore</a> <a href="/tags/Singleton-Pattern/" style="font-size: 10px;">Singleton Pattern</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/StringBuffer/" style="font-size: 10px;">StringBuffer</a> <a href="/tags/StringBuilder/" style="font-size: 10px;">StringBuilder</a> <a href="/tags/ThreadPoolExecutor/" style="font-size: 10px;">ThreadPoolExecutor</a> <a href="/tags/TreeMap/" style="font-size: 10px;">TreeMap</a> <a href="/tags/TreeSet/" style="font-size: 10px;">TreeSet</a> <a href="/tags/Vector/" style="font-size: 10px;">Vector</a> <a href="/tags/WeakHashMap/" style="font-size: 10px;">WeakHashMap</a> <a href="/tags/Wildcard/" style="font-size: 10px;">Wildcard</a> <a href="/tags/ambari/" style="font-size: 10px;">ambari</a> <a href="/tags/await/" style="font-size: 10px;">await</a> <a href="/tags/binlog/" style="font-size: 10px;">binlog</a> <a href="/tags/crontab/" style="font-size: 10px;">crontab</a> <a href="/tags/equals/" style="font-size: 20px;">equals</a> <a href="/tags/explain/" style="font-size: 10px;">explain</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hashCode/" style="font-size: 10px;">hashCode</a> <a href="/tags/hashmap/" style="font-size: 10px;">hashmap</a> <a href="/tags/index/" style="font-size: 10px;">index</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/jdk8/" style="font-size: 10px;">jdk8</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/maven/" style="font-size: 10px;">maven</a> <a href="/tags/my-cnfé…ç½®è¯¦è§£/" style="font-size: 10px;">my.cnfé…ç½®è¯¦è§£</a> <a href="/tags/mysql/" style="font-size: 20px;">mysql</a> <a href="/tags/mysqldump/" style="font-size: 10px;">mysqldump</a> <a href="/tags/mysqldumpslow/" style="font-size: 10px;">mysqldumpslow</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/nosql/" style="font-size: 10px;">nosql</a> <a href="/tags/notify/" style="font-size: 10px;">notify</a> <a href="/tags/notifyAll/" style="font-size: 10px;">notifyAll</a> <a href="/tags/quartz/" style="font-size: 10px;">quartz</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/runnable/" style="font-size: 10px;">runnable</a> <a href="/tags/scope/" style="font-size: 10px;">scope</a> <a href="/tags/signal/" style="font-size: 10px;">signal</a> <a href="/tags/signalAll/" style="font-size: 10px;">signalAll</a> <a href="/tags/solr/" style="font-size: 10px;">solr</a> <a href="/tags/sort/" style="font-size: 10px;">sort</a> <a href="/tags/spring/" style="font-size: 20px;">spring</a> <a href="/tags/springå•ä¾‹æ¨¡å¼/" style="font-size: 10px;">springå•ä¾‹æ¨¡å¼</a> <a href="/tags/springçº¿ç¨‹å®‰å…¨/" style="font-size: 10px;">springçº¿ç¨‹å®‰å…¨</a> <a href="/tags/string/" style="font-size: 10px;">string</a> <a href="/tags/synchronized/" style="font-size: 10px;">synchronized</a> <a href="/tags/thread/" style="font-size: 10px;">thread</a> <a href="/tags/volatile/" style="font-size: 10px;">volatile</a> <a href="/tags/vpn/" style="font-size: 10px;">vpn</a> <a href="/tags/wait/" style="font-size: 10px;">wait</a> <a href="/tags/web-xmlåŠ è½½é¡ºåº/" style="font-size: 10px;">web.xmlåŠ è½½é¡ºåº</a> <a href="/tags/ä¸»ä»/" style="font-size: 10px;">ä¸»ä»</a> <a href="/tags/ä¸»ä»å¤‡ä»½/" style="font-size: 10px;">ä¸»ä»å¤‡ä»½</a> <a href="/tags/ä¹è§‚é”/" style="font-size: 10px;">ä¹è§‚é”</a> <a href="/tags/äº‹åŠ¡ä¼ æ’­å±æ€§/" style="font-size: 10px;">äº‹åŠ¡ä¼ æ’­å±æ€§</a> <a href="/tags/äº‹åŠ¡éš”ç¦»çº§åˆ«/" style="font-size: 10px;">äº‹åŠ¡éš”ç¦»çº§åˆ«</a> <a href="/tags/äºŒåˆ†/" style="font-size: 10px;">äºŒåˆ†</a> <a href="/tags/å†’æ³¡/" style="font-size: 10px;">å†’æ³¡</a> <a href="/tags/å †/" style="font-size: 10px;">å †</a> <a href="/tags/å®¹å™¨/" style="font-size: 10px;">å®¹å™¨</a> <a href="/tags/å¸Œå°”/" style="font-size: 10px;">å¸Œå°”</a> <a href="/tags/å¸¸é‡æ± /" style="font-size: 10px;">å¸¸é‡æ± </a> <a href="/tags/å¿«é€Ÿ/" style="font-size: 10px;">å¿«é€Ÿ</a> <a href="/tags/æ€§èƒ½è°ƒä¼˜/" style="font-size: 10px;">æ€§èƒ½è°ƒä¼˜</a> <a href="/tags/æ‚²è§‚é”/" style="font-size: 10px;">æ‚²è§‚é”</a> <a href="/tags/æŒä¹…åŒ–/" style="font-size: 10px;">æŒä¹…åŒ–</a> <a href="/tags/æ’å…¥/" style="font-size: 10px;">æ’å…¥</a> <a href="/tags/æ–¹æ³•åŒº/" style="font-size: 10px;">æ–¹æ³•åŒº</a> <a href="/tags/æœ¬åœ°æ–¹æ³•æ ˆ/" style="font-size: 10px;">æœ¬åœ°æ–¹æ³•æ ˆ</a> <a href="/tags/æ³›å‹/" style="font-size: 10px;">æ³›å‹</a> <a href="/tags/ç¨‹åºè®¡æ•°å™¨/" style="font-size: 10px;">ç¨‹åºè®¡æ•°å™¨</a> <a href="/tags/çº¿ç¨‹æ± /" style="font-size: 10px;">çº¿ç¨‹æ± </a> <a href="/tags/è™šæ‹Ÿæœºæ ˆ/" style="font-size: 10px;">è™šæ‹Ÿæœºæ ˆ</a> <a href="/tags/è¯­å¥æ‰§è¡Œ/" style="font-size: 10px;">è¯­å¥æ‰§è¡Œ</a> <a href="/tags/è¿­ä»£/" style="font-size: 10px;">è¿­ä»£</a> <a href="/tags/é€‰æ‹©/" style="font-size: 10px;">é€‰æ‹©</a> <a href="/tags/é€’å½’/" style="font-size: 10px;">é€’å½’</a> <a href="/tags/éš”ç¦»çº§åˆ«/" style="font-size: 10px;">éš”ç¦»çº§åˆ«</a> <a href="/tags/é¢è¯•æŠ€å·§/" style="font-size: 10px;">é¢è¯•æŠ€å·§</a> <a href="/tags/é¢è¯•é¢˜/" style="font-size: 10px;">é¢è¯•é¢˜</a>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a target="_blank" class="main-nav-link switch-friends-link" href="http://jethan.bid/">å­¦æµ·æ— æ¶¯</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">çº¯æµ·è¿·ã€çˆ±è¿åŠ¨ã€çˆ±äº¤å‹ã€çˆ±æ—…è¡Œã€å–œæ¬¢æ¥è§¦æ–°é²œäº‹ç‰©ã€è¿æ¥æ–°çš„æŒ‘æˆ˜ï¼Œæ›´çˆ±æ¸¸ç¦»äºé”™ç»¼å¤æ‚çš„ç¼–ç ä¸é€»è¾‘ä¸­</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="Me">Jet</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                
                    <img lazy-src="/img/ali.jpg" class="js-avatar">
                
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="Me">Jet</a></h1>
            </hgroup>
            
            <p class="header-subtitle">æŠ€æœ¯åšå®¢</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">é¦–é¡µ</a></li>
                
                    <li><a href="/archives">å½’æ¡£</a></li>
                
                    <li><a href="/photos">ç›¸å†Œ</a></li>
                
                    <li><a href="http://markdown.xiaoshujiang.com/">ç¼–è¾‘å™¨</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                <div class="social">
                    
                        <a class="github" target="_blank" href="https://github.com/jethan" title="github">github</a>
                    
                        <a class="zhihu" target="_blank" href="https://www.zhihu.com/people/jet-77-36" title="zhihu">zhihu</a>
                    
                        <a class="weibo" target="_blank" href="http://weibo.com/2146269010/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
                    
                        <a class="oschina" target="_blank" href="http://git.oschina.net/jet-han" title="oschina">oschina</a>
                    
                        <a class="twitter" target="_blank" href="https://twitter.com/fajie_han" title="twitter">twitter</a>
                    
                </div>
            </nav>
        </header>                
    </div>
</nav>
      <div class="body-wrap"><article id="post-jdk8ğŸ’—ç‰¹æ€§" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/" class="article-date">
      <time datetime="2017-12-12T08:11:06.000Z" itemprop="datePublished">2017-12-12</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      jdk8ğŸ’—ç‰¹æ€§
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/java/">java</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jdk8/">jdk8</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><img src="http://jet-han.oschina.io/img/icons/java.jpg" alt="jdk8" title="jdk8"></p>
<hr>
<blockquote>
<p>æœ¬æ–‡ç¿»è¯‘æ•´ç†è‡ª <a href="https://github.com/winterbe/java8-tutorial" target="_blank" rel="external">https://github.com/winterbe/java8-tutorial</a></p>
</blockquote>
<p>å¸Œæœ›é˜…è¯»å®Œæœ¬æ–‡çš„å°ä¼™ä¼´èƒ½å¤Ÿç†Ÿç»ƒæŒæ¡å’Œåº”ç”¨ Java8 çš„å„ç§ç‰¹æ€§ï¼Œä½¿å…¶æˆä¸ºåœ¨å·¥ä½œä¸­çš„ä¸€é—¨åˆ©å™¨ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å¼€å¯ Java8 æ–°ç‰¹æ€§ä¹‹æ—…å§ï¼</p>
<hr>
<h2 id="æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•"><a href="#æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•" class="headerlink" title="æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•"></a>æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•</h2><p>Java 8 å…è®¸æˆ‘ä»¬é€šè¿‡ <code>default</code> å…³é”®å­—å¯¹æ¥å£ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤çš„å®ç°ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå…¬å¼æ¥å£</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Formula</span> </span>&#123;</div><div class="line">    <span class="comment">// è®¡ç®—</span></div><div class="line">    <span class="function"><span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">// æ±‚å¹³æ–¹æ ¹</span></div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">double</span> <span class="title">sqrt</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> Math.sqrt(a);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢è¿™ä¸ªæ¥å£ä¸­ï¼Œæˆ‘ä»¬é™¤äº†å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³• <code>calculate</code>ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³• <code>sqrt</code>ã€‚<br>æˆ‘ä»¬åœ¨å®ç°è¿™ä¸ªæ¥å£æ—¶ï¼Œå¯ä»¥åªéœ€è¦å®ç° <code>calculate</code> æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³• <code>sqrt</code> å¯ä»¥ç›´æ¥è°ƒç”¨å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¸å¿…å¼ºåˆ¶å®ç° <code>sqrt</code> æ–¹æ³•ã€‚<br><a id="more"></a></p>
<blockquote>
<p>è¡¥å……ï¼šé€šè¿‡ <code>default</code> å…³é”®å­—è¿™ä¸ªæ–°ç‰¹æ€§ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å¯¹ä¹‹å‰çš„æ¥å£åšæ‹“å±•ï¼Œè€Œæ­¤æ¥å£çš„å®ç°ç±»ä¸å¿…åšä»»ä½•æ”¹åŠ¨ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Formula formula = <span class="keyword">new</span> Formula() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> sqrt(a * <span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">formula.calculate(<span class="number">100</span>);     <span class="comment">// 100.0</span></div><div class="line">formula.sqrt(<span class="number">16</span>);           <span class="comment">// 4.0</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢é€šè¿‡åŒ¿åå¯¹è±¡å®ç°äº† <code>Formula</code> æ¥å£ã€‚ä½†æ˜¯å³ä½¿æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ä¸ºäº†å®Œæˆä¸€ä¸ª <code>sqrt(a * 100)</code> ç®€å•è®¡ç®—ï¼Œå°±å†™äº† 6 è¡Œä»£ç ï¼Œå¾ˆæ˜¯å†—ä½™ã€‚</p>
<h2 id="Lambda-è¡¨è¾¾å¼"><a href="#Lambda-è¡¨è¾¾å¼" class="headerlink" title="Lambda è¡¨è¾¾å¼"></a>Lambda è¡¨è¾¾å¼</h2><p><code>Lambda</code>è¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚æ˜¯Java ä¸ºäº†å¼•å…¥å‡½æ•°å¼ç¼–ç¨‹è€Œå¼•å…¥çš„ï¼Œåœ¨Javaä¸­ï¼Œ<code>Lambda</code>è¡¨è¾¾å¼æ˜¯æœ‰å‡½æ•°å¼æ¥å£å®ç°çš„ã€‚å¯¹äºå‡½æ•°å¼æ¥å£åœ¨ç¬¬ä¸€èŠ‚ç®€ä»‹ä¸­æœ‰æåˆ°ï¼Œå°±æ˜¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ã€‚åœ¨Java 8 ä½¿ç”¨Lambdaéå¸¸çš„ç®€å•ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(<span class="keyword">int</span> a, <span class="keyword">int</span> b) -&gt;    a * b                       </div><div class="line">(a, b)          -&gt;   a - b                       </div><div class="line">() -&gt; <span class="number">99</span>                                         </div><div class="line">(String a) -&gt; System.out.println(a)              </div><div class="line">a -&gt; <span class="number">2</span> * a                                       </div><div class="line">c -&gt; &#123; <span class="comment">//some complex statements &#125;</span></div></pre></td></tr></table></figure>
<p>è¿™äº›éƒ½æ˜¯<code>lambda</code>è¡¨è¾¾å¼,ç¼–å†™è§„åˆ™ï¼š</p>
<ul>
<li>Lambda å¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ªå‚æ•°,å¤šä¸ªå‚æ•°ä½¿ç”¨æ‹¬å·æ‹¬èµ·æ¥ï¼Œå¹¶ç”¨é€—å·éš”å¼€ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æ‹¬å·å¯ä»¥çœç•¥ã€‚   </li>
<li>å‚æ•°çš„ç±»å‹å¯ä»¥æ˜ç¡®å£°æ˜ï¼Œä¹Ÿå¯ä»¥çœç•¥ï¼ŒLambdaä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå‚æ•°ç±»å‹  </li>
<li>Lambda å‡½æ•°ä½“å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè¯­å¥ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼å¯ä»¥çœç•¥å¤§æ‹¬å·ã€‚  </li>
</ul>
<p>åœ¨å­¦ä¹  <code>Lambda</code> è¡¨è¾¾å¼ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€æ®µè€ç‰ˆæœ¬çš„ç¤ºä¾‹ä»£ç ï¼Œå…¶å¯¹ä¸€ä¸ªå«æœ‰å­—ç¬¦ä¸²çš„é›†åˆè¿›è¡Œæ’åºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; names = Arrays.asList(<span class="string">"peter"</span>, <span class="string">"anna"</span>, <span class="string">"mike"</span>, <span class="string">"xenia"</span>);</div><div class="line"></div><div class="line">Collections.sort(names, <span class="keyword">new</span> Comparator&lt;String&gt;() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(String a, String b)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> b.compareTo(a);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p><code>Collections</code> å·¥å…·ç±»æä¾›äº†é™æ€æ–¹æ³• <code>sort</code> æ–¹æ³•ï¼Œå…¥å‚æ˜¯ä¸€ä¸ª <code>List</code> é›†åˆï¼Œå’Œä¸€ä¸ª <code>Comparator</code> æ¯”è¾ƒå™¨ï¼Œä»¥ä¾¿å¯¹ç»™å®šçš„ <code>List</code> é›†åˆè¿›è¡Œ<br>æ’åºã€‚ä¸Šé¢çš„ç¤ºä¾‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ä½œä¸ºå…¥å‚ï¼Œè¿™ç§ç±»ä¼¼çš„æ“ä½œåœ¨æˆ‘ä»¬æ—¥å¸¸çš„å·¥ä½œä¸­éšå¤„å¯è§ã€‚</p>
<p>Java 8 ä¸­ä¸å†æ¨èè¿™ç§å†™æ³•ï¼Œè€Œæ˜¯æ¨èä½¿ç”¨ Lambda è¡¨è¾¾ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Collections.sort(names, (String a, String b) -&gt; &#123;</div><div class="line">    <span class="keyword">return</span> b.compareTo(a);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ çœ‹åˆ°çš„ï¼Œä¸Šé¢è¿™æ®µä»£ç å˜å¾—ç®€çŸ­å¾ˆå¤šè€Œä¸”æ˜“äºé˜…è¯»ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥å†ç²¾ç‚¼ä¸€ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Collections.sort(names, (String a, String b) -&gt; b.compareTo(a));</div></pre></td></tr></table></figure>
<p>å¯¹äºåªåŒ…å«ä¸€è¡Œæ–¹æ³•çš„ä»£ç å—ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥å¤§æ‹¬å·ï¼Œç›´æ¥ <code>return</code> å…³é”®ä»£ç å³å¯ã€‚è¿½æ±‚æè‡´ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®©å®ƒå†çŸ­ç‚¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">names.sort((a, b) -&gt; b.compareTo(a));</div></pre></td></tr></table></figure>
<p><code>List</code> é›†åˆç°åœ¨å·²ç»æ·»åŠ äº† <code>sort</code> æ–¹æ³•ã€‚è€Œä¸” Java ç¼–è¯‘å™¨èƒ½å¤Ÿæ ¹æ®<strong>ç±»å‹æ¨æ–­æœºåˆ¶</strong>åˆ¤æ–­å‡ºå‚æ•°ç±»å‹ï¼Œè¿™æ ·ï¼Œä½ è¿å…¥å‚çš„ç±»å‹éƒ½å¯ä»¥çœç•¥å•¦ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆå¼ºå¤§å‘¢ï¼</p>
<p><strong>ä½¿ç”¨Lambdaè¡¨è¾¾å¼</strong></p>
<p>éå†åˆ—è¡¨å¹¶æ‰§è¡Œä¸€äº›æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; pointList = <span class="keyword">new</span> ArrayList();</div><div class="line">pointList.add(<span class="string">"1"</span>);</div><div class="line">pointList.add(<span class="string">"2"</span>);</div><div class="line"> </div><div class="line">pointList.forEach(p -&gt;  &#123;</div><div class="line">                            System.out.println(p);</div><div class="line">                        &#125;</div><div class="line">                 );</div></pre></td></tr></table></figure>
<p>åœ¨çº¿ç¨‹ä¸­åˆ›å»º Runnable</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Thread(</div><div class="line">    () -&gt; System.out.println(<span class="string">"My Runnable"</span>);</div><div class="line">).start();</div></pre></td></tr></table></figure>
<p>æ ¹æ®å‘˜å·¥çš„åå­—æ’åº,è¿™é‡Œç›´æ¥ä½¿ç”¨äº†æ–¹æ³•å¼•ç”¨<br> <figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LambdaIntroduction</span> </span>&#123;</div><div class="line"> </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span> <span class="params">(String[] ar)</span></span>&#123;</div><div class="line">          Employee[] employees  = &#123;</div><div class="line">              <span class="keyword">new</span> Employee(<span class="string">"David"</span>),</div><div class="line">              <span class="keyword">new</span> Employee(<span class="string">"Naveen"</span>),</div><div class="line">              <span class="keyword">new</span> Employee(<span class="string">"Alex"</span>),</div><div class="line">              <span class="keyword">new</span> Employee(<span class="string">"Richard"</span>)&#125;;</div><div class="line">            </div><div class="line">          System.out.println(<span class="string">"Before Sorting Names: "</span>+Arrays.toString(employees));</div><div class="line">          Arrays.sort(employees, Employee::nameCompare);</div><div class="line">          System.out.println(<span class="string">"After Sorting Names "</span>+Arrays.toString(employees));</div><div class="line">      &#125;</div><div class="line">&#125;</div><div class="line">  </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</div><div class="line">  String name;</div><div class="line">  </div><div class="line">  Employee(String name) &#123;</div><div class="line">    <span class="keyword">this</span>.name = name;</div><div class="line">  &#125;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">nameCompare</span><span class="params">(Employee a1, Employee a2)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> a1.name.compareTo(a2.name);</div><div class="line">  &#125;</div><div class="line">    </div><div class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> name;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯¹GUIæ·»åŠ å®è·µç›‘å¬å™¨ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">JButton button =  <span class="keyword">new</span> JButton(<span class="string">"Submit"</span>);</div><div class="line">button.addActionListener((e) -&gt; &#123;</div><div class="line">    System.out.println(<span class="string">"Click event triggered !!"</span>);</div><div class="line">&#125;);  )</div></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šè¿™äº›éƒ½æ˜¯ä½¿ç”¨Java 8 lambdaè¡¨è¾¾å¼çš„ç¤ºä¾‹ã€‚</p>
<h2 id="é»˜è®¤æ–¹æ³•"><a href="#é»˜è®¤æ–¹æ³•" class="headerlink" title="é»˜è®¤æ–¹æ³•"></a>é»˜è®¤æ–¹æ³•</h2><p><strong>ä»€ä¹ˆæ˜¯é»˜è®¤æ–¹æ³•</strong><br>æ­£å¦‚å…¶åï¼Œåœ¨Java 8ä¸­ï¼Œé»˜è®¤æ–¹æ³•å°±æ˜¯ä½¿ç”¨<code>default</code>å…³é”®å­—æ ‡è®°çš„å®šä¹‰åœ¨æ¥å£ä¸­çš„æ–¹æ³•ã€‚å¦‚æœå­ç±»ä¸é‡å†™è¿™äº›æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨å­ç±»è°ƒç”¨è¿™äº›æ–¹æ³•çš„æ—¶å€™ä¼šç›´æ¥è°ƒç”¨æ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ã€‚å…¶å½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> interfce Moveable&#123;</div><div class="line">    <span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.println(<span class="string">"move"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å­ç±»ç»§æ‰¿æ¥å£ï¼Œæ— éœ€é‡å†™è¿™ä¸ªæ–¹æ³•å³å¯è°ƒç”¨</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Moveable</span></span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Animal tiger = <span class="keyword">new</span> Animal();</div><div class="line">        tiger.move();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<pre><code>Move
</code></pre><p>å¦‚æœå­ç±»æƒ³è¦é‡å†™è¿™ä¸ªé»˜è®¤æ–¹æ³•ï¼Œåªéœ€è¦å’Œæ™®é€šçš„é‡å†™æ¥å£ä¸€æ ·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Moveable</span></span>&#123;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">move</span><span class="params">()</span></span>&#123;</div><div class="line">        System.out.println(<span class="string">"I am running"</span>);</div><div class="line">    &#125;</div><div class="line">     </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</div><div class="line">        Animal tiger = <span class="keyword">new</span> Animal();</div><div class="line">        tiger.move();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨é»˜è®¤æ–¹æ³•çš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>å®šä¹‰é™æ€é»˜è®¤æ–¹æ³•ï¼šåœ¨æ¥å£ä¸­å®šä¹‰é™æ€é»˜è®¤æ–¹æ³•ï¼Œä½¿å¾—å…¶æ‰€æœ‰ç»§æ‰¿æ¥å£çš„å­ç±»éƒ½å¯ä»¥è°ƒç”¨è¿™äº›é™æ€æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥åœ¨æ¥å£ä¸­é›†ä¸­é™æ€æ–¹æ³•ï¼Œå…¶å­ç±»éƒ½å¯ä»¥åˆ†äº«ï¼Œè€Œæ— éœ€å°†é™æ€æ–¹æ³•åˆ†å¼€å®šä¹‰ã€‚   </li>
<li>æä¾›å…¼å®¹æ€§ï¼Œå¦‚æœå·²ç»å‘å¸ƒçš„æ¥å£æƒ³è¦æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œåªéœ€è¦æ·»åŠ é»˜è®¤æ–¹æ³•å³å¯ï¼Œå­ç±»æ— éœ€åšå‡ºä»»ä½•æ”¹å˜ã€‚   </li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆåœ¨Java 8 è¦å¼•å…¥é»˜è®¤æ–¹æ³•</strong></p>
<p>æœ€ç®€å•çš„å›å•å°±æ˜¯ï¼Œä¸ºäº†æ”¯æŒ<code>Lambda</code>è¡¨è¾¾å¼ã€‚å› ä¸º<code>Java 8</code>ä¸­å¼•å…¥äº†Lambdaè¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¾ˆå¤šJavaçš„æ ¸å¿ƒç±»éƒ½éœ€è¦ä¿®æ”¹ä»¥ä¾¿ä½¿ç”¨æ–°çš„Lambdaè¡¨è¾¾å¼ï¼Œä½†æ˜¯ä¸€äº›ç±»ä¾‹å¦‚ï¼Œjava.util.Listï¼Œä¸ä»…ä»…æ˜¯JDKçš„ç±»å®ç°ï¼ŒåŒæ ·è¢«å¾ˆå¤šç¬¬ä¸‰æ–¹çš„åº“ç»§æ‰¿ï¼Œå¦‚æœä¿®æ”¹äº†java.util.List æ¥å£ï¼Œé‚£ä¹ˆå…¶ä»–æ‰€æœ‰çš„ç¬¬ä¸‰æ–¹åº“éƒ½å¿…é¡»é‡æ–°å®ç°è¿™äº›æ–¹æ³•ï¼Œæœ€ç»ˆå¯¼è‡´æ— æ³•å…¼å®¹ã€‚æ‰€ä»¥å°±å¼•å…¥äº†é»˜è®¤æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šjava.lang.Iterableï¼Œæ·»åŠ çš„æ–°æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEach</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>&#123;</div><div class="line">    Objects.requireNonNull(action);</div><div class="line">    <span class="keyword">for</span> (T t : <span class="keyword">this</span>) &#123;</div><div class="line">        action.accept(t);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"> </div><div class="line">public class Animal implements Moveable&#123;</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        List&lt;Animal&gt; list = new ArrayList();</div><div class="line">        list.add(new Animal());</div><div class="line">        list.add(new Animal());</div><div class="line">        list.add(new Animal());</div><div class="line">         </div><div class="line">        //Iterator code reduced to one line</div><div class="line">        list.forEach((Moveable p) -&gt; p.move());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>==æ·»åŠ çš„é»˜è®¤æ–¹æ³•ï¼Œå…¶æ‰€æœ‰çš„å­ç±»éƒ½é»˜è®¤ç»§æ‰¿ï¼Œè€Œæ— éœ€é‡å†™ã€‚==</p>
<p>é»˜è®¤æ–¹æ³•ç»§æ‰¿å‘ç”Ÿå†²çªå¦‚ä½•è§£å†³<br>åœ¨Javaä¸­æ¥å£æ˜¯å¯ä»¥å¤šç»§æ‰¿çš„ï¼Œå½“ä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯é»˜è®¤æ–¹æ³•ç›¸åŒçš„å¤„ç†åŸåˆ™æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœå­ç±»è¦†ç›–ï¼Œç›´æ¥è°ƒç”¨å­ç±»æ–¹æ³•  </li>
<li>å¦‚æœå‡½æ•°æœ‰ç›¸åŒçš„ç­¾åï¼Œé€‰æ‹©æ›´åŠ æ˜ç¡®çš„é»˜è®¤æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒMoveableå’ŒWalkable,Walkableç»§æ‰¿äºMoveableï¼Œé‚£ä¹ˆå°±é€‰æ‹©Walkableä¸­çš„é»˜è®¤æ–¹æ³•ã€‚</li>
<li>å¦‚æœä¸¤ä¸ªæ¥å£å¹³çº§ï¼Œæ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œç¼–è¯‘å™¨æŠ¥é”™ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡åˆ¶å®šæ‰§è¡ŒæŸä¸ªæ–¹æ³•æ¥ç¡®å®š  </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Walkable.<span class="keyword">super</span>.move();</div><div class="line"><span class="comment">//or</span></div><div class="line">Moveable.<span class="keyword">super</span>.move();</div></pre></td></tr></table></figure>
<h2 id="å‡½æ•°å¼æ¥å£-Functional-Interface"><a href="#å‡½æ•°å¼æ¥å£-Functional-Interface" class="headerlink" title="å‡½æ•°å¼æ¥å£ Functional Interface"></a>å‡½æ•°å¼æ¥å£ Functional Interface</h2><p>æŠ›å‡ºä¸€ä¸ªç–‘é—®ï¼šåœ¨æˆ‘ä»¬ä¹¦å†™ä¸€æ®µ Lambda è¡¨è¾¾å¼åï¼ŒJava ç¼–è¯‘å™¨æ˜¯å¦‚ä½•è¿›è¡Œç±»å‹æ¨æ–­çš„ï¼Œå®ƒåˆæ˜¯æ€ä¹ˆçŸ¥é“é‡å†™çš„å“ªä¸ªæ–¹æ³•çš„ï¼Ÿ</p>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä¸æ˜¯æ¯ä¸ªæ¥å£éƒ½å¯ä»¥ç¼©å†™æˆ Lambda è¡¨è¾¾å¼ã€‚åªæœ‰é‚£äº›å‡½æ•°å¼æ¥å£ï¼ˆ<code>Functional Interface</code>ï¼‰æ‰èƒ½ç¼©å†™æˆ Lambda è¡¨ç¤ºå¼ã€‚</p>
<p>é‚£ä¹ˆä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼‰å‘¢ï¼Ÿ</p>
<p>æ‰€è°“å‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼‰å°±æ˜¯åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„å£°æ˜ã€‚é’ˆå¯¹è¯¥æ¥å£ç±»å‹çš„æ‰€æœ‰ Lambda è¡¨è¾¾å¼éƒ½ä¼šä¸è¿™ä¸ªæŠ½è±¡æ–¹æ³•åŒ¹é…ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼ŒJava 8 ä¸­ä¸æ˜¯å…è®¸é€šè¿‡ <code>defualt</code> å…³é”®å­—æ¥ä¸ºæ¥å£æ·»åŠ é»˜è®¤æ–¹æ³•å—ï¼Ÿé‚£å®ƒç®—ä¸ç®—æŠ½è±¡æ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šä¸ç®—ã€‚å› æ­¤ï¼Œä½ å¯ä»¥æ¯«æ— é¡¾å¿Œçš„æ·»åŠ é»˜è®¤æ–¹æ³•ï¼Œå®ƒå¹¶ä¸è¿åå‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼‰çš„å®šä¹‰ã€‚</p>
</blockquote>
<p>æ€»ç»“ä¸€ä¸‹ï¼šåªè¦æ¥å£ä¸­ä»…ä»…åŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å…¶æ”¹å†™ä¸º <code>Lambda</code> è¡¨è¾¾å¼ã€‚ä¸ºäº†ä¿è¯ä¸€ä¸ªæ¥å£æ˜ç¡®çš„è¢«å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼‰ï¼ŒJava 8æ·»åŠ äº†<code>@FunctionalInterface</code> æ³¨è§£æç¤ºç¼–è¯‘å™¨æ£€æŸ¥æ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œ==è¿™ä¸ªæ³¨è§£å¹¶ä¸æ˜¯å¿…é¡»çš„==ï¼Œåªæ˜¯èµ·åˆ°æç¤ºçš„ä½œç”¨ã€‚æ¨èåŠ ä¸Š <code>@FunctionalInterface</code> æ¥æ ‡è®°è¿™ä¸ªæ¥å£æ˜¯å‡½æ•°å¼æ¥å£ï¼Œå°±å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´æ£€æŸ¥é”™è¯¯ã€‚ å‡½æ•°å¼æ¥å£åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å¯ä»¥æ·»åŠ ä»»æ„çš„é»˜è®¤æ–¹æ³•ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code>@FunctionalInterface
interface Converter&lt;F, T&gt; {
    T convert(F from);
}
</code></pre><p>ç¤ºä¾‹ä»£ç 2ï¼š</p>
<pre><code>Converter&lt;String, Integer&gt; converter = (from) -&gt; Integer.valueOf(from);
Integer converted = converter.convert(&quot;123&quot;);
System.out.println(converted);    // 123
</code></pre><h2 id="å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•"><a href="#å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•" class="headerlink" title="å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•"></a>å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•</h2><p>åœ¨Java 8ä¸­å¯ä»¥é€šè¿‡<code>class::methodName</code>çš„æ–¹å¼å¼•ç”¨ä¸€ä¸ªç±»æˆ–è€…å®ä¾‹çš„æ–¹æ³•ã€‚</p>
<p><strong>æ–¹æ³•å¼•ç”¨çš„ç±»å‹</strong></p>
<ul>
<li>å¼•ç”¨é™æ€æ–¹æ³•ï¼šç›´æ¥å¼•ç”¨ç±»çš„é™æ€æ–¹æ³•ï¼Œä¾‹å¦‚<code>Math::max</code> ç­‰åŒäº <code>Math.max(x,y)</code></li>
<li>é€šè¿‡å®ä¾‹å¼•ç”¨å®ä¾‹æ–¹æ³•ï¼šä¾‹å¦‚ï¼š<code>System.out::println</code>ç­‰åŒäº<code>System.out.println(x)</code></li>
<li>é€šè¿‡ç±»å¼•ç”¨å®ä¾‹æ–¹æ³•ï¼š ä¾‹å¦‚<code>String::length</code>ç­‰åŒäº <code>str.length()</code> </li>
<li>å¼•ç”¨æ„é€ å‡½æ•°ï¼šä¾‹å¦‚<code>ArrayList::new</code>ç­‰åŒäº <code>new ArrayList()</code>       </li>
</ul>
<p>ä¸‹é¢è¯¦ç»†ä»‹ç»ä¸€ä¸‹è¿™å‡ ç§æ–¹æ³•å¼•ç”¨çš„å½¢å¼ï¼š</p>
<ol>
<li>å¼•ç”¨é™æ€æ–¹æ³•<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>);</div><div class="line">Optional&lt;Integer&gt; max = integers.stream().reduce(Math::max);</div><div class="line">max.ifPresent(value - &gt; System.out.println(value));</div></pre></td></tr></table></figure>
</li>
</ol>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5</div></pre></td></tr></table></figure>
<ol>
<li>é€šè¿‡å®ä¾‹å¼•ç”¨å®ä¾‹æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>);</div><div class="line">Optional&lt;Integer&gt; max = integers.stream().reduce(Math::max);</div><div class="line">max.ifPresent(value - &gt; System.out::println);</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">5</div></pre></td></tr></table></figure>
<ol>
<li>é€šè¿‡ç±»å¼•ç”¨å®ä¾‹æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; strings = Arrays</div><div class="line">        .asList(<span class="string">"how"</span>, <span class="string">"to"</span>, <span class="string">"do"</span>, <span class="string">"in"</span>, <span class="string">"java"</span>, <span class="string">"dot"</span>, <span class="string">"com"</span>);</div><div class="line"> </div><div class="line">List&lt;String&gt; sorted = strings</div><div class="line">        .stream()</div><div class="line">        .sorted((s1, s2) -&gt; s1.compareTo(s2))</div><div class="line">        .collect(Collectors.toList());</div><div class="line"> </div><div class="line">System.out.println(sorted);</div><div class="line"> </div><div class="line">List&lt;String&gt; sortedAlt = strings</div><div class="line">        .stream()</div><div class="line">        .sorted(String::compareTo)</div><div class="line">        .collect(Collectors.toList());</div><div class="line"> </div><div class="line">System.out.println(sortedAlt);</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[com, do, dot, how, in, java, to]</div><div class="line">[com, do, dot, how, in, java, to]</div></pre></td></tr></table></figure>
<ol>
<li>å¼•ç”¨æ„é€ å‡½æ•°</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; integers = IntStream</div><div class="line">                .range(1, 100)</div><div class="line">                .boxed()</div><div class="line">                .collect(Collectors.toCollection( ArrayList::new ));</div><div class="line"> </div><div class="line">Optional&lt;Integer&gt; max = integers.stream().reduce(Math::max);</div><div class="line"> </div><div class="line">max.ifPresent(System.out::println);</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">99</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Converter</span>&lt;<span class="title">F</span>, <span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function">T <span class="title">convert</span><span class="params">(F from)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Converter&lt;String, Integer&gt; converter = (from) -&gt; Integer.valueOf(from);</div><div class="line">Integer converted = converter.convert(<span class="string">"123"</span>);</div><div class="line">System.out.println(converted);    <span class="comment">// 123</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™æ®µä»£ç ï¼Œé€šè¿‡ Java 8 çš„æ–°ç‰¹æ€§ï¼Œè¿›ä¸€æ­¥ç®€åŒ–ä¸Šé¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Converter&lt;String, Integer&gt; converter = Integer::valueOf;</div><div class="line">Integer converted = converter.convert(<span class="string">"123"</span>);</div><div class="line">System.out.println(converted);   <span class="comment">// 123</span></div></pre></td></tr></table></figure>
<p>Java 8 ä¸­å…è®¸ä½ é€šè¿‡ <code>::</code> å…³é”®å­—æ¥å¼•ç”¨ç±»çš„æ–¹æ³•æˆ–æ„é€ å™¨ã€‚ä¸Šé¢çš„ä»£ç ç®€å•çš„ç¤ºä¾‹äº†å¦‚ä½•å¼•ç”¨é™æ€æ–¹æ³•ï¼Œå½“ç„¶ï¼Œé™¤äº†é™æ€æ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¼•ç”¨æ™®é€šæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Something</span> </span>&#123;</div><div class="line">    <span class="function">String <span class="title">startsWith</span><span class="params">(String s)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> String.valueOf(s.charAt(<span class="number">0</span>));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Something something = <span class="keyword">new</span> Something();</div><div class="line">Converter&lt;String, String&gt; converter = something::startsWith;</div><div class="line">String converted = converter.convert(<span class="string">"Java"</span>);</div><div class="line">System.out.println(converted);    <span class="comment">// "J"</span></div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹å¦‚ä½•é€šè¿‡ <code>::</code> å…³é”®å­—æ¥å¼•ç”¨ç±»çš„æ„é€ å™¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥å®šä¹‰ä¸€ä¸ªç¤ºä¾‹ç±»ï¼Œåœ¨ç±»ä¸­å£°æ˜ä¸¤ä¸ªæ„é€ å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    String firstName;</div><div class="line">    String lastName;</div><div class="line"></div><div class="line">    Person() &#123;&#125;</div><div class="line"></div><div class="line">    Person(String firstName, String lastName) &#123;</div><div class="line">        <span class="keyword">this</span>.firstName = firstName;</div><div class="line">        <span class="keyword">this</span>.lastName = lastName;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç„¶åï¼Œæˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªå·¥å‚æ¥å£ï¼Œç”¨æ¥ç”Ÿæˆ <code>Person</code> ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Person å·¥å‚</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">PersonFactory</span>&lt;<span class="title">P</span> <span class="keyword">extends</span> <span class="title">Person</span>&gt; </span>&#123;</div><div class="line">    <span class="function">P <span class="title">create</span><span class="params">(String firstName, String lastName)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>::</code> å…³é”®å­—æ¥å¼•ç”¨ <code>Person</code> ç±»çš„æ„é€ å™¨ï¼Œæ¥ä»£æ›¿æ‰‹åŠ¨å»å®ç°è¿™ä¸ªå·¥å‚æ¥å£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç›´æ¥å¼•ç”¨ Person æ„é€ å™¨</span></div><div class="line">PersonFactory&lt;Person&gt; personFactory = Person::<span class="keyword">new</span>;</div><div class="line">Person person = personFactory.create(<span class="string">"Peter"</span>, <span class="string">"Parker"</span>);</div></pre></td></tr></table></figure>
<p><code>Person::new</code> è¿™æ®µä»£ç ï¼Œèƒ½å¤Ÿç›´æ¥å¼•ç”¨ <code>Person</code> ç±»çš„æ„é€ å™¨ã€‚ç„¶å Java ç¼–è¯‘å™¨èƒ½å¤Ÿæ ¹æ®ä¸Šä¸‹æ–‡é€‰ä¸­æ­£ç¡®çš„æ„é€ å™¨å»å®ç° <code>PersonFactory.create</code> æ–¹æ³•ã€‚</p>
<h2 id="Lambda-è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•"><a href="#Lambda-è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•" class="headerlink" title="Lambda è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•"></a>Lambda è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•</h2><p>åœ¨æœ¬ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šè®¨è®ºå¦‚ä½•åœ¨ lambda è¡¨è¾¾å¼ä¸­è®¿é—®å¤–éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬ï¼šå±€éƒ¨å˜é‡ï¼Œæˆå‘˜å˜é‡ï¼Œé™æ€å˜é‡ï¼Œæ¥å£çš„é»˜è®¤æ–¹æ³•.ï¼‰ï¼Œå®ƒä¸åŒ¿åå†…éƒ¨ç±»è®¿é—®å¤–éƒ¨å˜é‡å¾ˆç›¸ä¼¼ã€‚</p>
<h3 id="è®¿é—®å±€éƒ¨å˜é‡"><a href="#è®¿é—®å±€éƒ¨å˜é‡" class="headerlink" title="è®¿é—®å±€éƒ¨å˜é‡"></a>è®¿é—®å±€éƒ¨å˜é‡</h3><p>åœ¨ Lambda è¡¨è¾¾å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®å¤–éƒ¨çš„ <code>final</code> ç±»å‹å˜é‡ï¼Œå¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è½¬æ¢å™¨</span></div><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Converter</span>&lt;<span class="title">F</span>, <span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function">T <span class="title">convert</span><span class="params">(F from)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">final</span> <span class="keyword">int</span> num = <span class="number">1</span>;</div><div class="line">Converter&lt;Integer, String&gt; stringConverter =</div><div class="line">        (from) -&gt; String.valueOf(from + num);</div><div class="line"></div><div class="line">stringConverter.convert(<span class="number">2</span>);     <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>ä¸åŒ¿åå†…éƒ¨ç±»ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬ä¸å¿…æ˜¾å¼å£°æ˜ <code>num</code> å˜é‡ä¸º <code>final</code> ç±»å‹ï¼Œä¸‹é¢è¿™æ®µä»£ç åŒæ ·æœ‰æ•ˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> num = <span class="number">1</span>;</div><div class="line">Converter&lt;Integer, String&gt; stringConverter =</div><div class="line">        (from) -&gt; String.valueOf(from + num);</div><div class="line"></div><div class="line">stringConverter.convert(<span class="number">2</span>);     <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>ä½†æ˜¯ <code>num</code> å˜é‡å¿…é¡»ä¸ºéšå¼çš„ <code>final</code> ç±»å‹ï¼Œä½•ä¸ºéšå¼çš„ <code>final</code> å‘¢ï¼Ÿå°±æ˜¯è¯´åˆ°ç¼–è¯‘æœŸä¸ºæ­¢ï¼Œ<code>num</code> å¯¹è±¡æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ï¼Œå¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œå°±ä¸èƒ½è¢«ç¼–è¯‘é€šè¿‡ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> num = <span class="number">1</span>;</div><div class="line">Converter&lt;Integer, String&gt; stringConverter =</div><div class="line">        (from) -&gt; String.valueOf(from + num);</div><div class="line">num = <span class="number">3</span>;</div></pre></td></tr></table></figure>
<p>åœ¨ lambda è¡¨è¾¾å¼å†…éƒ¨æ”¹å˜ <code>num</code> å€¼åŒæ ·ç¼–è¯‘ä¸é€šè¿‡ï¼Œéœ€è¦æ³¨æ„, æ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> num = <span class="number">1</span>;</div><div class="line">Converter&lt;Integer, String&gt; converter = (from) -&gt; &#123;</div><div class="line">	String value = String.valueOf(from + num);</div><div class="line">	num = <span class="number">3</span>;</div><div class="line">	<span class="keyword">return</span> value;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h3 id="è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡"><a href="#è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡" class="headerlink" title="è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡"></a>è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡</h3><p>ä¸Šä¸€ç« èŠ‚ä¸­ï¼Œäº†è§£äº†å¦‚ä½•åœ¨ Lambda è¡¨è¾¾å¼ä¸­è®¿é—®å±€éƒ¨å˜é‡ã€‚ä¸å±€éƒ¨å˜é‡ç›¸æ¯”ï¼Œåœ¨ Lambda è¡¨è¾¾å¼ä¸­å¯¹æˆå‘˜å˜é‡å’Œé™æ€å˜é‡æ‹¥æœ‰è¯»å†™æƒé™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Converter</span>&lt;<span class="title">F</span>, <span class="title">T</span>&gt; </span>&#123;</div><div class="line">    <span class="function">T <span class="title">convert</span><span class="params">(F from)</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lambda4</span> </span>&#123;</div><div class="line">        <span class="comment">// é™æ€å˜é‡</span></div><div class="line">        <span class="keyword">static</span> <span class="keyword">int</span> outerStaticNum;</div><div class="line">        <span class="comment">// æˆå‘˜å˜é‡</span></div><div class="line">        <span class="keyword">int</span> outerNum;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">void</span> <span class="title">testScopes</span><span class="params">()</span> </span>&#123;</div><div class="line">            Converter&lt;Integer, String&gt; stringConverter1 = (from) -&gt; &#123;</div><div class="line">                <span class="comment">// å¯¹æˆå‘˜å˜é‡èµ‹å€¼</span></div><div class="line">                outerNum = <span class="number">23</span>;</div><div class="line">                <span class="keyword">return</span> String.valueOf(from);</div><div class="line">            &#125;;</div><div class="line"></div><div class="line">            Converter&lt;Integer, String&gt; stringConverter2 = (from) -&gt; &#123;</div><div class="line">                <span class="comment">// å¯¹é™æ€å˜é‡èµ‹å€¼</span></div><div class="line">                outerStaticNum = <span class="number">72</span>;</div><div class="line">                <span class="keyword">return</span> String.valueOf(from);</div><div class="line">            &#125;;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h3 id="è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•"><a href="#è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•" class="headerlink" title="è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•"></a>è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•</h3><p>è¿˜è®°å¾—ç¬¬ä¸€ç« èŠ‚ä¸­å®šä¹‰çš„é‚£ä¸ª <code>Formula</code> (å…¬å¼) æ¥å£å—ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Formula</span> </span>&#123;</div><div class="line">	<span class="comment">// è®¡ç®—</span></div><div class="line">	<span class="function"><span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a)</span></span>;</div><div class="line"></div><div class="line">	<span class="comment">// æ±‚å¹³æ–¹æ ¹</span></div><div class="line">	<span class="function"><span class="keyword">default</span> <span class="keyword">double</span> <span class="title">sqrt</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> Math.sqrt(a);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“æ—¶ï¼Œæˆ‘ä»¬åœ¨æ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªå¸¦æœ‰é»˜è®¤å®ç°çš„ <code>sqrt</code> æ±‚å¹³æ–¹æ ¹æ–¹æ³•ï¼Œåœ¨åŒ¿åå†…éƒ¨ç±»ä¸­æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®¿é—®æ­¤æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Formula formula = <span class="keyword">new</span> Formula() &#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> sqrt(a * <span class="number">100</span>);</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>ä½†æ˜¯åœ¨ lambda è¡¨è¾¾å¼ä¸­å¯ä¸è¡Œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Formula formula = (a) -&gt; sqrt(a * <span class="number">100</span>);</div></pre></td></tr></table></figure>
<p>å¸¦æœ‰é»˜è®¤å®ç°çš„æ¥å£æ–¹æ³•ï¼Œæ˜¯<strong>ä¸èƒ½</strong>åœ¨ lambda è¡¨è¾¾å¼ä¸­è®¿é—®çš„ï¼Œä¸Šé¢è¿™æ®µä»£ç å°†æ— æ³•è¢«ç¼–è¯‘é€šè¿‡ã€‚</p>
<h2 id="å†…ç½®çš„å‡½æ•°å¼æ¥å£"><a href="#å†…ç½®çš„å‡½æ•°å¼æ¥å£" class="headerlink" title="å†…ç½®çš„å‡½æ•°å¼æ¥å£"></a>å†…ç½®çš„å‡½æ•°å¼æ¥å£</h2><p>JDK 1.8 API åŒ…å«äº†å¾ˆå¤šå†…ç½®çš„å‡½æ•°å¼æ¥å£ã€‚å…¶ä¸­å°±åŒ…æ‹¬æˆ‘ä»¬åœ¨è€ç‰ˆæœ¬ä¸­ç»å¸¸è§åˆ°çš„ Comparator å’Œ Runnableï¼ŒJava 8 ä¸ºä»–ä»¬éƒ½æ·»åŠ äº† @FunctionalInterface æ³¨è§£ï¼Œä»¥ç”¨æ¥æ”¯æŒ Lambda è¡¨è¾¾å¼ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œé™¤äº† Comparator å’Œ Runnable å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–°çš„å‡½æ•°å¼æ¥å£ï¼Œå®ƒä»¬å¾ˆå¤šéƒ½å€Ÿé‰´äºçŸ¥åçš„ <a href="https://github.com/google/guava" target="_blank" rel="external">Google Guava</a> åº“ã€‚</p>
<p>å¯¹äºå®ƒä»¬ï¼Œå³ä½¿ä½ å·²ç»éå¸¸ç†Ÿæ‚‰äº†ï¼Œè¿˜æ˜¯æœ€å¥½äº†è§£ä¸€ä¸‹çš„ï¼š</p>
<h3 id="Predicate-æ–­è¨€"><a href="#Predicate-æ–­è¨€" class="headerlink" title="Predicate æ–­è¨€"></a>Predicate æ–­è¨€</h3><p><code>Predicate</code> æ˜¯ä¸€ä¸ªå¯ä»¥æŒ‡å®šå…¥å‚ç±»å‹ï¼Œå¹¶è¿”å› boolean å€¼çš„å‡½æ•°å¼æ¥å£ã€‚å®ƒå†…éƒ¨æä¾›äº†ä¸€äº›å¸¦æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œå¯ä»¥<br>è¢«ç”¨æ¥ç»„åˆä¸€ä¸ªå¤æ‚çš„é€»è¾‘åˆ¤æ–­ï¼ˆ<code>and</code>, <code>or</code>, <code>negate</code>ï¼‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Predicate&lt;String&gt; predicate = (s) -&gt; s.length() &gt; <span class="number">0</span>;</div><div class="line"></div><div class="line">predicate.test(<span class="string">"foo"</span>);              <span class="comment">// true</span></div><div class="line">predicate.negate().test(<span class="string">"foo"</span>);     <span class="comment">// false</span></div><div class="line">predicate.and((s) -&gt; s.contains(<span class="string">"a"</span>)).test(<span class="string">"foo"</span>);  <span class="comment">//false</span></div><div class="line"></div><div class="line">Predicate&lt;Boolean&gt; nonNull = Objects::nonNull;</div><div class="line">Predicate&lt;Boolean&gt; isNull = Objects::isNull;</div><div class="line"></div><div class="line">Predicate&lt;String&gt; isEmpty = String::isEmpty;</div><div class="line">Predicate&lt;String&gt; isNotEmpty = isEmpty.negate();</div></pre></td></tr></table></figure>
<p>ä¾‹å¦‚ï¼šåœ¨<code>filter</code>ä¸­ å°±ä¼šæ¥æ”¶ä¸€ä¸ª<code>Predicate</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Returns a stream consisting of the elements of this stream that match</div><div class="line"> * the given predicate.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;This is an &lt;a href="package-summary.html#StreamOps"&gt;intermediate</div><div class="line"> * operation&lt;/a&gt;.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> predicate a non-interfering stateless predicate to apply to each element to determine if it</div><div class="line"> * should be included in the new returned stream.</div><div class="line"> * <span class="doctag">@return</span> the new stream</div><div class="line"> */</div><div class="line"><span class="function">Stream&lt;T&gt; <span class="title">filter</span><span class="params">(Predicate&lt;? <span class="keyword">super</span> T&gt; predicate)</span></span>;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æ¥æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä½¿ç”¨<code>Predicate</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> predicateExample;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> lombok.AccessLevel;</div><div class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</div><div class="line"><span class="keyword">import</span> lombok.Builder;</div><div class="line"><span class="keyword">import</span> lombok.Data;</div><div class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.function.Predicate;</div><div class="line"></div><div class="line"><span class="meta">@Data</span></div><div class="line"><span class="meta">@Builder</span></div><div class="line"><span class="meta">@NoArgsConstructor</span></div><div class="line"><span class="meta">@AllArgsConstructor</span>(access = AccessLevel.PUBLIC)</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> Integer id;</div><div class="line">    <span class="keyword">private</span> Integer age;</div><div class="line">    <span class="keyword">private</span> String gender;</div><div class="line">    <span class="keyword">private</span> String firstName;</div><div class="line">    <span class="keyword">private</span> String lastName;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAdultMale</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; <span class="number">21</span> &amp;&amp; p.getGender().equalsIgnoreCase(<span class="string">"M"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAdultFemale</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; <span class="number">18</span> &amp;&amp; p.getGender().equalsIgnoreCase(<span class="string">"F"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAgeMoreThan</span><span class="params">(Integer age)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; age;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç å®šä¹‰äº†å¤šä¸ª<code>Predicate</code>ï¼Œåˆ†åˆ«å¯¹åº”å¤šä¸ªç­›é€‰æ¡ä»¶ï¼Œä¸‹é¢å¼€å§‹ä½¿ç”¨è¿™äº›æ–­è¨€ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> predicateExample;</div><div class="line"> </div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.function.Predicate;</div><div class="line"><span class="keyword">import</span> java.util.stream.Collectors;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemberPredicates</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAdultMale</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; <span class="number">21</span> &amp;&amp; p.getGender().equalsIgnoreCase(<span class="string">"M"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAdultFemale</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; <span class="number">18</span> &amp;&amp; p.getGender().equalsIgnoreCase(<span class="string">"F"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Predicate&lt;Member&gt; <span class="title">isAgeMoreThan</span><span class="params">(Integer age)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> p -&gt; p.getAge() &gt; age;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title">filterMembers</span> <span class="params">(List&lt;Member&gt; employees, Predicate&lt;Member&gt; predicate)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> employees.stream().filter( predicate ).map(Member::getId).collect(Collectors.toList());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">package predicateExample;</div><div class="line"> </div><div class="line">import com.mintbao.eva.dto.admin.Member;</div><div class="line">import com.mintbao.eva.dto.admin.MemberPredicates;</div><div class="line">import lombok.extern.slf4j.Slf4j;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.Arrays;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">@Slf4j</div><div class="line">public class TestMemberPredicates &#123;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        Member member = new Member(1, 23, &quot;M&quot;, &quot;Rick&quot;, &quot;Beethovan&quot;);</div><div class="line">        Member member1 = new Member(2, 13, &quot;F&quot;, &quot;Martina&quot;, &quot;Hengis&quot;);</div><div class="line">        Member member2 = new Member(3, 43, &quot;M&quot;, &quot;Ricky&quot;, &quot;Martin&quot;);</div><div class="line">        Member member3 = new Member(4, 26, &quot;M&quot;, &quot;Jon&quot;, &quot;Lowman&quot;);</div><div class="line">        Member member4 = new Member(5, 19, &quot;F&quot;, &quot;Cristine&quot;, &quot;Maria&quot;);</div><div class="line">        Member member5 = new Member(6, 15, &quot;M&quot;, &quot;David&quot;, &quot;Feezor&quot;);</div><div class="line">        Member member6 = new Member(7, 68, &quot;F&quot;, &quot;Melissa&quot;, &quot;Roy&quot;);</div><div class="line">        Member member7 = new Member(8, 79, &quot;M&quot;, &quot;Alex&quot;, &quot;Gussin&quot;);</div><div class="line">        Member member8 = new Member(9, 15, &quot;F&quot;, &quot;Neetu&quot;, &quot;Singh&quot;);</div><div class="line">        Member member9 = new Member(10, 45, &quot;M&quot;, &quot;Naveen&quot;, &quot;Jain&quot;);</div><div class="line"></div><div class="line">        List&lt;Member&gt; employees = new ArrayList&lt;&gt;(Arrays.asList(member, member1, member2, member3, member4, member5, member6, member7, member8, member9));</div><div class="line"></div><div class="line">        log.info(&quot;adult and male: &#123;&#125;&quot;, MemberPredicates.filterMembers(employees, MemberPredicates.isAdultMale()));</div><div class="line"></div><div class="line">        log.info(&quot;adult and female: &#123;&#125;&quot;, MemberPredicates.filterMembers(employees, MemberPredicates.isAdultFemale()));</div><div class="line"></div><div class="line">        log.info(&quot;older than: &#123;&#125;&quot;, MemberPredicates.filterMembers(employees, MemberPredicates.isAgeMoreThan(35)));</div><div class="line"></div><div class="line">        log.info(&quot;not older than: &#123;&#125;&quot;, MemberPredicates.filterMembers(employees, MemberPredicates.isAgeMoreThan(35).negate()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">adult and male: [1, 3, 4, 8, 10]</div><div class="line">adult and female: [5, 7]</div><div class="line">older than: [3, 7, 8, 10]</div><div class="line">not older than: [1, 2, 4, 5, 6, 9]</div></pre></td></tr></table></figure>
<p><strong>æ­£åˆ™è¡¨è¾¾å¼è¡¨ç¤ºï¼š</strong><br>å¯ä»¥é€šè¿‡<code>Pattern.compile().asPredicate()</code>å°†æ­£åˆ™è¡¨è¾¾å¼è½¬æ¢ä¸º<code>Predicate</code>ã€‚ åœ¨Java 8ä¹‹å‰ï¼Œä»ä¸€ä¸ªæ•°ç»„ä¸­æ‰¾å‡ºç¬¦åˆæ­£åˆ™è§„åˆ™çš„å­—ç¬¦ä¸²çš„æ–¹æ³•æ˜¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.regex.Matcher;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"></div><div class="line"><span class="meta">@Slf</span>4j</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMemberPredicates</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String EMAIL_PATTERN = <span class="string">"^(.+)@example.com$"</span>;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Pattern pattern = Pattern.compile(EMAIL_PATTERN);</div><div class="line"></div><div class="line">        List&lt;String&gt; emails = Arrays.asList(<span class="string">"alex@example.com"</span>, <span class="string">"bob@yahoo.com"</span>,</div><div class="line">                <span class="string">"cat@google.com"</span>, <span class="string">"david@example.com"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (String email : emails) &#123;</div><div class="line">            Matcher matcher = pattern.matcher(email);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (matcher.matches()) &#123;</div><div class="line">                log.info(email);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>è½¬æ¢ä¸ºPredicatï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.function.Predicate;</div><div class="line"><span class="keyword">import</span> java.util.regex.Pattern;</div><div class="line"><span class="keyword">import</span> java.util.stream.Collectors;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegexPredicateExample</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// Compile regex as predicate</span></div><div class="line">        Predicate&lt;String&gt; emailFilter = Pattern</div><div class="line">                .compile(EMAIL_PATTERN)</div><div class="line">                .asPredicate();</div><div class="line"></div><div class="line">        <span class="comment">// Input list</span></div><div class="line">        List&lt;String&gt; emails = Arrays.asList(<span class="string">"alex@example.com"</span>, <span class="string">"bob@yahoo.com"</span>,</div><div class="line">                <span class="string">"cat@google.com"</span>, <span class="string">"david@example.com"</span>);</div><div class="line"></div><div class="line">        <span class="comment">// Apply predicate filter</span></div><div class="line">        List&lt;String&gt; desiredEmails = emails</div><div class="line">                .stream()</div><div class="line">                .filter(emailFilter)</div><div class="line">                .collect(Collectors.toList());</div><div class="line"></div><div class="line">        <span class="comment">// Now perform desired operation</span></div><div class="line">        desiredEmails.forEach(log::info);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h3><p><code>Function</code> å‡½æ•°å¼æ¥å£çš„ä½œç”¨æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æä¾›ä¸€ä¸ªåŸæ–™ï¼Œä»–ç»™ç”Ÿäº§ä¸€ä¸ªæœ€ç»ˆçš„äº§å“ã€‚é€šè¿‡å®ƒæä¾›çš„é»˜è®¤æ–¹æ³•ï¼Œç»„åˆ,é“¾è¡Œå¤„ç†(<code>compose</code>, <code>andThen</code>)ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Function&lt;String, Integer&gt; toInteger = Integer::valueOf;</div><div class="line">Function&lt;String, String&gt; backToString = toInteger.andThen(String::valueOf);</div><div class="line"></div><div class="line">backToString.apply(<span class="string">"123"</span>);     <span class="comment">// "123"</span></div></pre></td></tr></table></figure>
<h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><p><code>Optional</code>æ˜¯Java8æä¾›çš„ä¸ºäº†è§£å†³<code>null</code>å®‰å…¨é—®é¢˜çš„ä¸€ä¸ªAPIã€‚å–„ç”¨<code>Optional</code>å¯ä»¥ä½¿æˆ‘ä»¬ä»£ç ä¸­å¾ˆå¤šç¹çã€ä¸‘é™‹çš„è®¾è®¡å˜å¾—ååˆ†ä¼˜é›…ã€‚è¿™ç¯‡æ–‡ç« æ˜¯å»ºç«‹åœ¨ä½ å¯¹Optionalçš„ç”¨æ³•æœ‰ä¸€å®šäº†è§£çš„åŸºç¡€ä¸Šçš„ï¼Œå¦‚æœä½ è¿˜ä¸å¤ªäº†è§£Optionalï¼Œå¯ä»¥å…ˆå»çœ‹çœ‹ç›¸å…³æ•™ç¨‹ï¼Œæˆ–è€…æŸ¥é˜…Javaæ–‡æ¡£ã€‚</p>
<p>ä½¿ç”¨Optionalï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠä¸‹é¢è¿™æ ·çš„ä»£ç è¿›è¡Œæ”¹å†™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName</span><span class="params">(User u)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (u == <span class="keyword">null</span>)</div><div class="line">        <span class="keyword">return</span> <span class="string">"Unknown"</span>;</div><div class="line">    <span class="keyword">return</span> u.name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸è¿‡ï¼Œåƒä¸‡ä¸è¦è¿™æ ·æ”¹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName</span><span class="params">(User u)</span> </span>&#123;</div><div class="line">    Optional&lt;User&gt; user = Optional.ofNullable(u);</div><div class="line">    <span class="keyword">if</span> (!user.isPresent())</div><div class="line">        <span class="keyword">return</span> <span class="string">"Unknown"</span>;</div><div class="line">    <span class="keyword">return</span> user.get().name;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æ”¹å†™éä½†ä¸ç®€æ´ï¼Œè€Œä¸”å…¶æ“ä½œè¿˜æ˜¯å’Œç¬¬ä¸€æ®µä»£ç ä¸€æ ·ã€‚æ— éå°±æ˜¯ç”¨<code>isPresent</code>æ–¹æ³•æ¥æ›¿ä»£<code>u==null</code>ã€‚è¿™æ ·çš„æ”¹å†™å¹¶ä¸æ˜¯<code>Optional</code>æ­£ç¡®çš„ç”¨æ³•ï¼Œæˆ‘ä»¬å†æ¥æ”¹å†™ä¸€æ¬¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getName</span><span class="params">(User u)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> Optional.ofNullable(u)</div><div class="line">                    .map(user-&gt;user.name)</div><div class="line">                    .orElse(<span class="string">"Unknown"</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ ·æ‰æ˜¯æ­£ç¡®ä½¿ç”¨<code>Optional</code>çš„å§¿åŠ¿ã€‚é‚£ä¹ˆæŒ‰ç…§è¿™ç§æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å¿ƒçš„è¿›è¡Œ==é“¾å¼è°ƒç”¨==ï¼Œè€Œä¸æ˜¯ä¸€å±‚å±‚åˆ¤æ–­äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getChampionName</span><span class="params">(Competition comp)</span> <span class="keyword">throws</span> IllegalArgumentException </span>&#123;</div><div class="line">    <span class="keyword">if</span> (comp != <span class="keyword">null</span>) &#123;</div><div class="line">        CompResult result = comp.getResult();</div><div class="line">        <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</div><div class="line">            User champion = result.getChampion();</div><div class="line">            <span class="keyword">if</span> (champion != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">return</span> champion.getName();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"The value of param comp isn't available."</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äºç§ç§åŸå› ï¼ˆæ¯”å¦‚ï¼šæ¯”èµ›è¿˜æ²¡æœ‰äº§ç”Ÿå† å†›ã€æ–¹æ³•çš„éæ­£å¸¸è°ƒç”¨ã€æŸä¸ªæ–¹æ³•çš„å®ç°é‡ŒåŸ‹è—çš„å¤§ç¤¼åŒ…ç­‰ç­‰ï¼‰ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å¼€å¿ƒçš„ä¸€è·¯<code>comp.getResult().getChampion().getName(</code>åˆ°åº•ã€‚è€Œå…¶ä»–è¯­è¨€æ¯”å¦‚<code>kotlin</code>ï¼Œå°±æä¾›äº†åœ¨è¯­æ³•å±‚é¢çš„æ“ä½œç¬¦åŠ æŒï¼š<code>comp?.getResult()?.getChampion()?.getName()</code>ã€‚</p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ç»è¿‡OptionalåŠ æŒè¿‡åï¼Œè¿™äº›ä»£ç ä¼šå˜æˆä»€ä¹ˆæ ·å­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getChampionName</span><span class="params">(Competition comp)</span> <span class="keyword">throws</span> IllegalArgumentException </span>&#123;</div><div class="line">    <span class="keyword">return</span> Optional.ofNullable(comp)</div><div class="line">            .map(c-&gt;c.getResult())</div><div class="line">            .map(r-&gt;r.getChampion())</div><div class="line">            .map(u-&gt;u.getName())</div><div class="line">            .orElseThrow(()-&gt;<span class="keyword">new</span> IllegalArgumentException(<span class="string">"The value of param comp isn't available."</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>Optional</code>ç»™äº†æˆ‘ä»¬ä¸€ä¸ªçœŸæ­£ä¼˜é›…çš„<code>Java</code>é£æ ¼çš„æ–¹æ³•æ¥è§£å†³<code>null</code>å®‰å…¨é—®é¢˜ã€‚è™½ç„¶æ²¡æœ‰ç›´æ¥æä¾›ä¸€ä¸ªæ“ä½œç¬¦å†™èµ·æ¥çŸ­ï¼Œä½†æ˜¯ä»£ç çœ‹èµ·æ¥ä¾ç„¶å¾ˆçˆ½å¾ˆèˆ’æœã€‚æ›´ä½•å†µ?.è¿™æ ·çš„è¯­æ³•å¥½ä¸å¥½çœ‹è¿˜è§ä»è§æ™ºå‘¢ã€‚</p>
<p>è¿˜æœ‰å¾ˆå¤šä¸é”™çš„ä½¿ç”¨å§¿åŠ¿ï¼Œæ¯”å¦‚ä¸ºç©ºåˆ™ä¸æ‰“å°å¯ä»¥è¿™ä¹ˆå†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">string.ifPresent(System.out::println);</div></pre></td></tr></table></figure>
<p><code>Optional</code>çš„é­…åŠ›è¿˜ä¸æ­¢äºæ­¤ï¼Œ<code>Optional</code>è¿˜æœ‰ä¸€äº›ç¥å¥‡çš„ç”¨æ³•ï¼Œæ¯”å¦‚<code>Optional</code>å¯ä»¥ç”¨æ¥æ£€éªŒå‚æ•°çš„åˆæ³•æ€§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> <span class="keyword">throws</span> IllegalArgumentException </span>&#123;</div><div class="line">    <span class="keyword">this</span>.name = Optional.ofNullable(name).filter(User::isNameValid)</div><div class="line">                        .orElseThrow(()-&gt;<span class="keyword">new</span> IllegalArgumentException(<span class="string">"Invalid username."</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Optional&lt;Integer&gt; canBeEmpty1 = Optional.of(<span class="number">5</span>);</div><div class="line">canBeEmpty1.isPresent();         <span class="comment">// returns true</span></div><div class="line">canBeEmpty1.get();             <span class="comment">// returns 5</span></div><div class="line"> </div><div class="line">Optional&lt;Integer&gt; canBeEmpty2 = Optional.empty();</div><div class="line">canBeEmpty2.isPresent();         <span class="comment">// returns false</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥å°†<code>Optional</code>çœ‹ä½œå•å€¼å®¹å™¨ï¼Œè¦ä¹ˆåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¦ä¹ˆä¸åŒ…å«ã€‚æ³¨æ„ï¼Œ<code>Optional</code>å¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£æ‰€æœ‰çš„<code>null</code>å¼•ç”¨ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨æ¥è®¾è®¡æ›´æ˜“ç†è§£çš„APIï¼Œ==å½“ä¸€ä¸ªå‡½æ•°è¿”å›çš„æ˜¯<code>Optional</code>çš„æ—¶å€™ï¼Œè°ƒç”¨è€…å°±ä¼šæ³¨æ„éœ€è¦æ£€æµ‹å…¶æ˜¯å¦æœ‰å€¼æ‰èƒ½å¤Ÿè°ƒç”¨==ã€‚</p>
<p> <strong>åˆ›å»ºOptionalå¯¹è±¡</strong></p>
<p>ä¸»è¦æœ‰ä¸‰ç§åˆ›å»ºOptionalå¯¹è±¡çš„æ–¹æ³• </p>
<p> 1).ä½¿ç”¨ Optional.empty() åˆ›å»ºä¸€ä¸ªç©ºçš„Optional</p>
<pre><code>   Optional&lt;Integer&gt; possible = Optional.empty();
</code></pre><p> 2). ä½¿ç”¨Optional.of() åˆ›å»ºä¸€ä¸ªénullçš„å€¼ã€‚</p>
<pre><code>   Optional&lt;Integer&gt; possible = Optional.of(5);
</code></pre><p> 3). ä½¿ç”¨<code>Optional.ofNullable()</code> åˆ›å»ºä¸€ä¸ªå¯ä»¥åŒ…å«ç©ºå€¼çš„Optionalå¯¹è±¡ï¼Œå¦‚æœå‚æ•°æ˜¯nullï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºçš„Optional</p>
<pre><code>    Optional&lt;Integer&gt; possible = Optional.ofNullable(5);
</code></pre><p><strong>å¤„ç†Optionalçš„å€¼</strong></p>
<p>å½“å¾—åˆ°ä¸€ä¸ª<code>Optional</code>çš„å€¼çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æ£€æŸ¥å…¶æ˜¯å¦åŒ…å«äº†å€¼</p>
<pre><code>Optional&lt;Integer&gt; possible = Optional.of(5);
possible.ifPresent(System.out::println);
</code></pre><p>å½“ç„¶ä¸Šé¢çš„ä»£ç ä¹Ÿå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼é‡å†™ï¼š</p>
<pre><code>if(possible.isPresent()){
    System.out.println(possible.get());
}
</code></pre><p>ä¸è¿‡è¿™ä¹ˆåšå¹¶ä¸æ¨èï¼Œå› ä¸ºè¿™ä¸ªå¤„ç†<code>null</code>æ²¡å•¥åŒºåˆ«ã€‚æ¨èä½¿ç”¨ä¸Šé¢çš„ä»£ç è¿”å›<code>Optional</code></p>
<p>ä¸€èˆ¬æ¥è®²å¯¹äºæ–¹æ³•å¦‚æœæœ€ç»ˆéœ€è¦è¿”å›<code>null</code>çš„æ—¶å€™ï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤å€¼ä»¥ä¾¿æ›¿æ¢<code>null</code>ï¼Œä½¿ç”¨<code>Optional</code>å¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼è¿”å›</p>
<pre><code>Optional&lt;Company&gt; companyOptional = Optional.empty();
</code></pre><p>æ£€æŸ¥Optionalï¼Œå¦‚æœæœ‰å€¼ç›´æ¥è¿”å›ï¼Œå¦åˆ™è¿”å› <code>new Company()</code>;</p>
<pre><code>Company company = companyOptional.orElse(new Company());
</code></pre><p>æ£€æŸ¥Optionalï¼Œå¦‚æœæœ‰å€¼ç›´æ¥è¿”å›ï¼Œå¦åˆ™è¿”å› æŠ›å‡ºå¼‚å¸¸;</p>
<pre><code>Company company  = companyOptional.orElseThrow(IllegalStateException::new);
</code></pre><p>åœ¨<code>Filter</code>ä¸­ä½¿ç”¨<code>Optional</code></p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code>Optional&lt;Company&gt; companyOptional = Optional.empty();
companyOptional.filter(department -&gt; &quot;Finance&quot;.equals(department.getName())
                .ifPresent(() -&gt; System.out.println(&quot;Finance is present&quot;));)
</code></pre><p><code>filter</code> å‡½æ•°æ¥å—ä¸€ä¸ª<code>Predicate</code>æ¥å£ä½œä¸ºå‚æ•°ï¼Œå¦‚æœ<code>Optional</code>ä¸­å­˜åœ¨å€¼ï¼Œé‚£ä¹ˆå°±ä¼šåŒ¹é…ç›´æ¥è¾“å‡ºã€‚</p>
<p><strong>ç»“è®º</strong></p>
<p><code>Optional</code>çš„ç›®çš„å¹¶ä¸æ˜¯è¦å®Œå…¨æ›¿ä»£<code>null</code>å¼•ç”¨ï¼Œè€Œæ˜¯ä¸ºäº†è®¾è®¡æ›´å‹å¥½çš„APIè€Œè®¾è®¡çš„ã€‚</p>
<h3 id="Supplier-ç”Ÿäº§è€…"><a href="#Supplier-ç”Ÿäº§è€…" class="headerlink" title="Supplier ç”Ÿäº§è€…"></a>Supplier ç”Ÿäº§è€…</h3><p><code>Supplier</code> ä¸ <code>Function</code> ä¸åŒï¼Œå®ƒä¸æ¥å—å…¥å‚ï¼Œç›´æ¥ä¸ºæˆ‘ä»¬ç”Ÿäº§ä¸€ä¸ªæŒ‡å®šçš„ç»“æœï¼Œæœ‰ç‚¹åƒç”Ÿäº§è€…æ¨¡å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    String firstName;</div><div class="line">    String lastName;</div><div class="line"></div><div class="line">    Person() &#123;&#125;</div><div class="line"></div><div class="line">    Person(String firstName, String lastName) &#123;</div><div class="line">        <span class="keyword">this</span>.firstName = firstName;</div><div class="line">        <span class="keyword">this</span>.lastName = lastName;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Supplier&lt;Person&gt; personSupplier = Person::<span class="keyword">new</span>;</div><div class="line">personSupplier.get();   <span class="comment">// new Person</span></div></pre></td></tr></table></figure>
<h3 id="Consumer-æ¶ˆè´¹è€…"><a href="#Consumer-æ¶ˆè´¹è€…" class="headerlink" title="Consumer æ¶ˆè´¹è€…"></a>Consumer æ¶ˆè´¹è€…</h3><p>å¯¹äº <code>Consumer</code>ï¼Œæˆ‘ä»¬éœ€è¦æä¾›å…¥å‚ï¼Œç”¨æ¥è¢«æ¶ˆè´¹ï¼Œå¦‚ä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</div><div class="line">    String firstName;</div><div class="line">    String lastName;</div><div class="line"></div><div class="line">    Person() &#123;&#125;</div><div class="line"></div><div class="line">    Person(String firstName, String lastName) &#123;</div><div class="line">        <span class="keyword">this</span>.firstName = firstName;</div><div class="line">        <span class="keyword">this</span>.lastName = lastName;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">``` </div><div class="line"></div><div class="line">```java</div><div class="line">Consumer&lt;Person&gt; greeter = (p) -&gt; System.out.println(<span class="string">"Hello, "</span> + p.firstName);</div><div class="line">greeter.accept(<span class="keyword">new</span> Person(<span class="string">"Luke"</span>, <span class="string">"Skywalker"</span>));</div></pre></td></tr></table></figure>
<h3 id="Comparator"><a href="#Comparator" class="headerlink" title="Comparator"></a>Comparator</h3><p><code>Comparator</code> åœ¨ Java 8 ä¹‹å‰æ˜¯ä½¿ç”¨æ¯”è¾ƒæ™®éçš„ã€‚Java 8 ä¸­é™¤äº†å°†å…¶å‡çº§æˆäº†å‡½æ•°å¼æ¥å£ï¼Œè¿˜ä¸ºå®ƒæ‹“å±•äº†ä¸€äº›é»˜è®¤æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Comparator&lt;Person&gt; comparator = (p1, p2) -&gt; p1.firstName.compareTo(p2.firstName);</div><div class="line"></div><div class="line">Person p1 = <span class="keyword">new</span> Person(<span class="string">"John"</span>, <span class="string">"Doe"</span>);</div><div class="line">Person p2 = <span class="keyword">new</span> Person(<span class="string">"Alice"</span>, <span class="string">"Wonderland"</span>);</div><div class="line"></div><div class="line">comparator.compare(p1, p2);             <span class="comment">// &gt; 0</span></div><div class="line">comparator.reversed().compare(p1, p2);  <span class="comment">// &lt; 0</span></div></pre></td></tr></table></figure>
<h2 id="Stream-æµ"><a href="#Stream-æµ" class="headerlink" title="Stream æµ"></a>Stream æµ</h2><p>è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬å¼€å§‹æ­¥å…¥å­¦ä¹  <code>Stream</code> æµã€‚</p>
<p><em>ä»€ä¹ˆæ˜¯ <code>Stream</code> æµï¼Ÿ</em></p>
<p>ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>java.util.Stream</code> å¯¹ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ çš„é›†åˆåšå„ç§æ“ä½œã€‚è¿™äº›æ“ä½œå¯èƒ½æ˜¯ <em>ä¸­é—´æ“ä½œ</em> äº¦æˆ–æ˜¯ <em>ç»ˆç«¯æ“ä½œ</em>ã€‚<br>ç»ˆç«¯æ“ä½œä¼šè¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œä¸­é—´æ“ä½œä¼šè¿”å›ä¸€ä¸ª <code>Stream</code> æµã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ åªèƒ½å¯¹å®ç°äº† <code>java.util.Collection</code> æ¥å£çš„ç±»åšæµçš„æ“ä½œã€‚</p>
<blockquote>
<p><code>Map</code> ä¸æ”¯æŒ <code>Stream</code> æµã€‚</p>
</blockquote>
<p><code>Stream</code> æµæ”¯æŒåŒæ­¥æ‰§è¡Œï¼Œä¹Ÿæ”¯æŒå¹¶å‘æ‰§è¡Œã€‚ </p>
<h3 id="Filter-è¿‡æ»¤"><a href="#Filter-è¿‡æ»¤" class="headerlink" title="Filter è¿‡æ»¤"></a>Filter è¿‡æ»¤</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>List</code> é›†åˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; stringCollection = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">stringCollection.add(<span class="string">"ddd2"</span>);</div><div class="line">stringCollection.add(<span class="string">"aaa2"</span>);</div><div class="line">stringCollection.add(<span class="string">"bbb1"</span>);</div><div class="line">stringCollection.add(<span class="string">"aaa1"</span>);</div><div class="line">stringCollection.add(<span class="string">"bbb3"</span>);</div><div class="line">stringCollection.add(<span class="string">"ccc"</span>);</div><div class="line">stringCollection.add(<span class="string">"bbb2"</span>);</div><div class="line">stringCollection.add(<span class="string">"ddd1"</span>);</div></pre></td></tr></table></figure>
<p><code>Filter</code> çš„å…¥å‚æ˜¯ä¸€ä¸ª <code>Predicate</code>, ä¸Šé¢å·²ç»è¯´åˆ°ï¼Œ<code>Predicate</code> æ˜¯ä¸€ä¸ªæ–­è¨€çš„ä¸­é—´æ“ä½œï¼Œå®ƒèƒ½å¤Ÿå¸®æˆ‘ä»¬ç­›é€‰å‡ºæˆ‘ä»¬éœ€è¦çš„é›†åˆå…ƒç´ ã€‚å®ƒçš„è¿”å‚åŒæ ·æ˜¯ä¸€ä¸ª <code>Stream</code> æµï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>foreach</code> ç»ˆç«¯æ“ä½œï¼Œæ¥æ‰“å°è¢«ç­›é€‰çš„å…ƒç´ ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">stringCollection</div><div class="line">    .stream()</div><div class="line">    .filter((s) -&gt; s.startsWith(<span class="string">"a"</span>))</div><div class="line">    .forEach(System.out::println);</div><div class="line"></div><div class="line"><span class="comment">// "aaa2", "aaa1"</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼š<code>foreach</code> æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒçš„è¿”å‚æ˜¯ <code>void</code>, æˆ‘ä»¬æ— æ³•å¯¹å…¶å†æ¬¡è¿›è¡Œæµæ“ä½œã€‚</p>
</blockquote>
<h3 id="Sorted-æ’åº"><a href="#Sorted-æ’åº" class="headerlink" title="Sorted æ’åº"></a>Sorted æ’åº</h3><p><code>Sorted</code> åŒæ ·æ˜¯ä¸€ä¸ªä¸­é—´æ“ä½œï¼Œå®ƒçš„è¿”å‚æ˜¯ä¸€ä¸ª <code>Stream</code> æµã€‚å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>Comparator</code> ç”¨æ¥è‡ªå®šä¹‰æ’åºï¼Œå¦‚æœä¸ä¼ ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„è‡ªç„¶æ’åºã€‚</p>
<p>// resourceDOSæ˜¯ä¸€ä¸ªList<resourcedo>,å®ä½“å’Œlistå®šä¹‰çœç•¥<br>// æ ¹æ®ä¿®æ”¹æ—¶é—´æ’åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">resourceDOS.stream().sorted(Comparator.comparing(ResourceDO::getUpdateTime()).collect(Collectors.toList());</div><div class="line"></div><div class="line">resourceDOS.stream().sorted(Comparator.comparing(e -&gt; e.getUpdateTime()).collect(Collectors.toList());</div></pre></td></tr></table></figure></resourcedo></p>
<p>// ä½¿ç”¨Comparator.reversed()å¯ä»¥åè½¬ä¸€ä¸ªæ’åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resourceDOS.stream().sorted(Comparator.comparing(ResourceDO::getUpdateTime().reversed()).collect(Collectors.toList());</div></pre></td></tr></table></figure></p>
<p>// å…ˆæ ¹æ®<code>updateTime</code>æ’åºï¼Œå†æ ¹æ®<code>createTime</code>æ’åºï¼Œä½¿ç”¨<code>thenComparing()</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">resourceDOS.stream().sorted(Comparator.comparing(ResourceDO::getUpdateTime().thenComparing(ResourceDO::getCreateTime)).collect(Collectors.toList());</div></pre></td></tr></table></figure></p>
<p>// è‡ªç„¶æ’åº<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">stringCollection</div><div class="line">    .stream()</div><div class="line">    .sorted()</div><div class="line">    .filter((s) -&gt; s.startsWith(<span class="string">"a"</span>))</div><div class="line">    .forEach(System.out::println);</div><div class="line"></div><div class="line"><span class="comment">// "aaa1", "aaa2"</span></div></pre></td></tr></table></figure></p>
<h4 id="å¹¶è¡Œæ’åº-åªéœ€è¦ä½¿ç”¨-parallelSort-å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚"><a href="#å¹¶è¡Œæ’åº-åªéœ€è¦ä½¿ç”¨-parallelSort-å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚" class="headerlink" title="å¹¶è¡Œæ’åº,åªéœ€è¦ä½¿ç”¨ parallelSort() å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚"></a>å¹¶è¡Œæ’åº,åªéœ€è¦ä½¿ç”¨ <code>parallelSort()</code> å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Parallel Sorting</span></div><div class="line">ResourceDO[] resourceDOArray = resourceDOS.toArray(<span class="keyword">new</span> ResourceDO[resourceDOS.size()]);</div><div class="line">Arrays.parallelSort(resourceDOArray, Comparator.comparing(ResourceDO::getUpdateTime().thenComparing(ResourceDO::getCreateTime));</div><div class="line">System.out.println(resourceDOArray);</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„ï¼Œ<code>sorted</code> ä¸ä¼šå¯¹ <code>stringCollection</code> åšå‡ºä»»ä½•æ”¹å˜ï¼Œ<code>stringCollection</code> è¿˜æ˜¯åŸæœ‰çš„é‚£äº›å…ƒç´ ï¼Œä¸”é¡ºåºä¸å˜ï¼Œéœ€è¦ä½¿ç”¨æ’åºåçš„å°±å¾—é‡æ–°èµ‹å€¼æˆ–è€…ä¿å­˜åˆ°æ–°çš„é›†åˆï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">System.out.println(stringCollection);</div><div class="line"><span class="comment">// ddd2, aaa2, bbb1, aaa1, bbb3, ccc, bbb2, ddd1</span></div></pre></td></tr></table></figure>
<h3 id="count-å’Œ-counting-ç»Ÿè®¡æ•°é‡"><a href="#count-å’Œ-counting-ç»Ÿè®¡æ•°é‡" class="headerlink" title="count() å’Œ counting() ç»Ÿè®¡æ•°é‡"></a>count() å’Œ counting() ç»Ÿè®¡æ•°é‡</h3><p><code>count</code> æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒèƒ½å¤Ÿç»Ÿè®¡ <code>stream</code> æµä¸­çš„å…ƒç´ æ€»æ•°ï¼Œè¿”å›å€¼æ˜¯ <code>long</code> ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å…ˆå¯¹ list ä¸­å­—ç¬¦ä¸²å¼€å¤´ä¸º b è¿›è¡Œè¿‡æ»¤ï¼Œç„¶åç»Ÿè®¡æ•°é‡</span></div><div class="line"><span class="keyword">long</span> startsWithB =</div><div class="line">    stringCollection</div><div class="line">        .stream()</div><div class="line">        .filter((s) -&gt; s.startsWith(<span class="string">"b"</span>))</div><div class="line">        .count();</div><div class="line"></div><div class="line">System.out.println(startsWithB);    <span class="comment">// 3</span></div></pre></td></tr></table></figure>
<p>å’Œcounting()<code>çš„åŒºåˆ«æ˜¯ï¼Œ</code>count()<code>æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå¯¹</code>Stream<code>è®¡æ•°å¹¶è¿”å›ä¸€ä¸ª</code>long<code>ï¼Œ</code>counting()<code>åˆ™æ˜¯</code>Collector`çš„æ”¶é›†æ–¹æ³•,ç”¨æ³•åŒºåˆ«å¦‚ä¸‹ï¼š</p>
<p>ä½¿ç”¨<code>counting()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">&#123;</div><div class="line">    <span class="keyword">long</span> count = Stream.of(<span class="string">"how"</span>,<span class="string">"to"</span>,<span class="string">"do"</span>,<span class="string">"in"</span>,<span class="string">"java"</span>).collect(Collectors.counting());</div><div class="line">    System.out.printf(<span class="string">"There are %d elements in the stream %n"</span>, count);</div><div class="line">     </div><div class="line">    count = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>).collect(Collectors.counting());</div><div class="line">    System.out.printf(<span class="string">"There are %d elements in the stream %n"</span>, count);</div><div class="line">     </div><div class="line">    count = Stream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>).filter(i -&gt; i%<span class="number">2</span> == <span class="number">0</span>).collect(Collectors.counting());</div><div class="line">    System.out.printf(<span class="string">"There are %d elements in the stream %n"</span>, count);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Map-è½¬æ¢-å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼"><a href="#Map-è½¬æ¢-å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼" class="headerlink" title="Map è½¬æ¢(å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼)"></a>Map è½¬æ¢(å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼)</h3><p>ä¸­é—´æ“ä½œ <code>Map</code> èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å°† <code>List</code> ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åšåŠŸèƒ½å¤„ç†ã€‚ä¾‹å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼Œé€šè¿‡ <code>map</code> æˆ‘ä»¬å°†æ¯ä¸€ä¸ª <code>string</code> è½¬æˆå¤§å†™ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">stringCollection</div><div class="line">    .stream()</div><div class="line">    .map(String::toUpperCase)</div><div class="line">    .sorted((a, b) -&gt; b.compareTo(a))</div><div class="line">    .forEach(System.out::println);</div><div class="line"></div><div class="line"><span class="comment">// "DDD2", "DDD1", "CCC", "BBB3", "BBB2", "AAA2", "AAA1"</span></div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åšå¯¹è±¡ä¹‹é—´çš„è½¬æ¢ï¼Œä¸šåŠ¡ä¸­æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯å°† <code>DO</code>ï¼ˆæ•°æ®åº“å¯¹è±¡ï¼‰ è½¬æ¢æˆ <code>VO</code>ï¼ˆè¡¨ç°å¯¹è±¡ï¼‰ ã€‚</p>
<h3 id="Match-åŒ¹é…"><a href="#Match-åŒ¹é…" class="headerlink" title="Match åŒ¹é…"></a>Match åŒ¹é…</h3><p>é¡¾åæ€ä¹‰ï¼Œ<code>match</code> ç”¨æ¥åšåŒ¹é…æ“ä½œï¼Œå®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>boolean</code> ç±»å‹ã€‚é€šè¿‡ <code>match</code>, æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„éªŒè¯ä¸€ä¸ª <code>list</code> ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªç±»å‹çš„å…ƒç´ ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// éªŒè¯ list ä¸­ string æ˜¯å¦æœ‰ä»¥ a å¼€å¤´çš„, åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªï¼Œå³è¿”å› true</span></div><div class="line"><span class="keyword">boolean</span> anyStartsWithA =</div><div class="line">    stringCollection</div><div class="line">        .stream()</div><div class="line">        .anyMatch((s) -&gt; s.startsWith(<span class="string">"a"</span>));</div><div class="line"></div><div class="line">System.out.println(anyStartsWithA);      <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// éªŒè¯ list ä¸­ string æ˜¯å¦éƒ½æ˜¯ä»¥ a å¼€å¤´çš„</span></div><div class="line"><span class="keyword">boolean</span> allStartsWithA =</div><div class="line">    stringCollection</div><div class="line">        .stream()</div><div class="line">        .allMatch((s) -&gt; s.startsWith(<span class="string">"a"</span>));</div><div class="line"></div><div class="line">System.out.println(allStartsWithA);      <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// éªŒè¯ list ä¸­ string æ˜¯å¦éƒ½ä¸æ˜¯ä»¥ z å¼€å¤´çš„,</span></div><div class="line"><span class="keyword">boolean</span> noneStartsWithZ =</div><div class="line">    stringCollection</div><div class="line">        .stream()</div><div class="line">        .noneMatch((s) -&gt; s.startsWith(<span class="string">"z"</span>));</div><div class="line"></div><div class="line">System.out.println(noneStartsWithZ);      <span class="comment">// true</span></div></pre></td></tr></table></figure>
<h3 id="collect-è½¬æ¢ä¸ºCollection"><a href="#collect-è½¬æ¢ä¸ºCollection" class="headerlink" title="collect()è½¬æ¢ä¸ºCollection"></a>collect()è½¬æ¢ä¸ºCollection</h3><p><code>collect()</code> æ”¶é›†<code>stream</code>ä¸­çš„å…ƒç´ è½¬åŒ–ä¸º<code>collection</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;String&gt; memNamesInUppercase = stringCollection.stream().sorted()</div><div class="line">                            .map(String::toUpperCase)</div><div class="line">                            .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<h4 id="åŸç”Ÿç±»å‹è½¬æ¢"><a href="#åŸç”Ÿç±»å‹è½¬æ¢" class="headerlink" title="åŸç”Ÿç±»å‹è½¬æ¢"></a>åŸç”Ÿç±»å‹è½¬æ¢</h4><p>å¯¹äºåŸç”Ÿç±»å‹ä¸èƒ½ç›´æ¥ä½¿ç”¨è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨boxed()æ–¹æ³•åšä¸­é—´å¤„ç†ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; ints = IntStream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">                .boxed()</div><div class="line">                .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨<code>mapToLong(),mapToDouble,mapToObj()</code>æ–¹æ³•æ¥å®ç°ä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">List&lt;Integer&gt; ints = IntStream.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>)</div><div class="line">            .mapToObj(Integer::valueOf)</div><div class="line">            .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<p>å¯¹äº<code>LongStreamå’ŒDoubleStream</code>éƒ½æœ‰ç›¸åŒçš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">List&lt;Long&gt; longs = LongStream.of(<span class="number">1l</span>,<span class="number">2l</span>,<span class="number">3l</span>,<span class="number">4l</span>,<span class="number">5l</span>)</div><div class="line">                .boxed()</div><div class="line">                .collect(Collectors.toList());</div><div class="line">                </div><div class="line">List&lt;Double&gt; doubles = DoubleStream.of(<span class="number">1</span>d,<span class="number">2</span>d,<span class="number">3</span>d,<span class="number">4</span>d,<span class="number">5</span>d)</div><div class="line">                .boxed()</div><div class="line">                .collect(Collectors.toList());</div></pre></td></tr></table></figure>
<p>åŒæ ·å¯ä»¥åˆ©ç”¨<code>Stream</code>æ¥ç”Ÿæˆéšæœºæ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RandomNumberExample</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">    &#123;</div><div class="line">        Random random = <span class="keyword">new</span> Random();</div><div class="line">         </div><div class="line">        <span class="comment">//Five random integers</span></div><div class="line"> </div><div class="line">        random.ints( <span class="number">5</span> ).sorted().forEach( System.out::println );</div><div class="line"> </div><div class="line">        <span class="comment">//Five random doubles between 0 (inclusive) and 0.5 (exclusive)</span></div><div class="line"> </div><div class="line">        random.doubles( <span class="number">5</span>, <span class="number">0</span>, <span class="number">0.5</span> ).sorted().forEach( System.out::println );</div><div class="line"> </div><div class="line">        <span class="comment">//Boxing long to Long so they can be collected</span></div><div class="line"> </div><div class="line">        List&lt;Long&gt; longs = random.longs( <span class="number">5</span> ).boxed().collect( Collectors.toList() );</div><div class="line">        System.out.println(longs);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">-110679835</div><div class="line">156507518</div><div class="line">1493532761</div><div class="line">2054227999</div><div class="line">2086798656</div><div class="line"></div><div class="line">7.724902934355127E-4</div><div class="line">0.2688148659358355</div><div class="line">0.3525387800324165</div><div class="line">0.3947437475521328</div><div class="line">0.4903926740688234</div><div class="line"></div><div class="line">[-2722967875761490425, 5531368074516893531, -8225300378125625898, </div><div class="line">-9067114159502460546, -5286357091370510421]</div></pre></td></tr></table></figure>
<h3 id="toArray-è½¬æ¢ä¸ºæ•°ç»„"><a href="#toArray-è½¬æ¢ä¸ºæ•°ç»„" class="headerlink" title="toArray()è½¬æ¢ä¸ºæ•°ç»„"></a>toArray()è½¬æ¢ä¸ºæ•°ç»„</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span>[] intArray = IntStream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>).toArray();</div></pre></td></tr></table></figure>
<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach()"></a>foreach()</h3><p>å…¶ä½œç”¨æ˜¯éå†<code>stream</code>æ‰€æœ‰çš„å…ƒç´ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">memberNames.forEach(System.out::println);</div></pre></td></tr></table></figure>
<h3 id="ä¸­é—´æ“ä½œ"><a href="#ä¸­é—´æ“ä½œ" class="headerlink" title="ä¸­é—´æ“ä½œ"></a>ä¸­é—´æ“ä½œ</h3><p>ä¸­é—´æ“ä½œè¿”å›çš„æ˜¯Streamæœ¬èº«ï¼Œæ‰€ä»¥å¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥ä½œä¸ºå¤„ç†é“¾å¤„ç†Stream</p>
<h3 id="ç»ˆæ­¢æ“ä½œ"><a href="#ç»ˆæ­¢æ“ä½œ" class="headerlink" title="ç»ˆæ­¢æ“ä½œ"></a>ç»ˆæ­¢æ“ä½œ</h3><p>ç»ˆæ­¢æ“ä½œä¼šè¿”å›ä¸€ä¸ªç‰¹å®šçš„ç±»å‹ï¼Œè€Œä¸æ˜¯è¿”å›<code>Stream</code>æœ¬èº«ã€‚</p>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h3><p><code>Reduce</code> ä¸­æ–‡ç¿»è¯‘ä¸ºï¼š<em>å‡å°‘ã€ç¼©å°</em>ã€‚é€šè¿‡å…¥å‚çš„ <code>Function</code>ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°† <code>list</code> å½’çº¦æˆä¸€ä¸ªå€¼ã€‚å®ƒçš„è¿”å›ç±»å‹æ˜¯ <code>Optional</code> ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Optional&lt;String&gt; reduced =</div><div class="line">    stringCollection</div><div class="line">        .stream()</div><div class="line">        .sorted()</div><div class="line">        .reduce((s1, s2) -&gt; s1 + <span class="string">"#"</span> + s2);</div><div class="line"></div><div class="line">reduced.ifPresent(System.out::println);</div><div class="line"><span class="comment">// "aaa1#aaa2#bbb1#bbb2#bbb3#ccc#ddd1#ddd2"</span></div></pre></td></tr></table></figure>
<h3 id="distinct"><a href="#distinct" class="headerlink" title="distinct()"></a>distinct()</h3><p>å¯ä»¥ä½¿ç”¨<code>Stream.distinct()</code>æ¥è¿‡æ»¤ç›¸åŒå…ƒç´ ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Collection&lt;String&gt; list = Arrays.asList(<span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>, <span class="string">"D"</span>, <span class="string">"A"</span>, <span class="string">"B"</span>, <span class="string">"C"</span>);</div><div class="line"> </div><div class="line"><span class="comment">// Get collection without duplicated element distinct only</span></div><div class="line">List&lt;String&gt; distinctElements = list.stream().distinct().collect(Collectors.toList());</div><div class="line"> </div><div class="line"><span class="comment">//Let's verify distinct elements</span></div><div class="line">System.out.println(distinctElements);</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡<code>distinct()</code>å‡½æ•°è¿‡æ»¤éå¸¸çš„ç®€å•å®¹æ˜“ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¤„ç†çš„å¯¹è±¡å¤šä¼šæ¯”è¾ƒå¤æ‚ï¼Œä¾‹å¦‚åŒ…å«å„ç§å±æ€§ç­‰ï¼Œå¾ˆå°‘ä¼šåªå¤„ç†åŸç”Ÿç±»å‹å’Œå­—ç¬¦ä¸²ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šåˆ¶ä¸€ä¸ª <code>Predicate</code>çš„æ¥å£æ¥å¤„ç†å¤æ‚å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Predicate&lt;T&gt; <span class="title">distinctByKey</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, Object&gt; keyExtractor)</span></span></div><div class="line">&#123;</div><div class="line">    Map&lt;Object, Boolean&gt; map = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</div><div class="line">    <span class="keyword">return</span> t -&gt; map.putIfAbsent(keyExtractor.apply(t), Boolean.TRUE) == <span class="keyword">null</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªæ–¹æ³•éå¸¸çš„ç®€å•ï¼Œé€šè¿‡<code>ConcurrentHashMap</code>æ¥ç¡®å®šæ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´ ï¼Œå…¶æ¥å—ä¸€ä¸ªå‡½æ•°å¼å¯¹è±¡çš„å¼•ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.Arrays;</div><div class="line"><span class="keyword">import</span> java.util.Collection;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> java.util.concurrent.ConcurrentHashMap;</div><div class="line"><span class="keyword">import</span> java.util.function.Function;</div><div class="line"><span class="keyword">import</span> java.util.function.Predicate;</div><div class="line"><span class="keyword">import</span> java.util.stream.Collectors;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaStreamDistinctExamples</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></div><div class="line">    &#123;</div><div class="line">        Person lokesh = <span class="keyword">new</span> Person(<span class="number">1</span>, <span class="string">"Lokesh"</span>, <span class="string">"Gupta"</span>);</div><div class="line">        Person brian = <span class="keyword">new</span> Person(<span class="number">2</span>, <span class="string">"Brian"</span>, <span class="string">"Clooney"</span>);</div><div class="line">        Person alex = <span class="keyword">new</span> Person(<span class="number">3</span>, <span class="string">"Alex"</span>, <span class="string">"Kolen"</span>);</div><div class="line">         </div><div class="line">        <span class="comment">//Add some random persons</span></div><div class="line">        Collection&lt;Person&gt; list = Arrays.asList(lokesh,brian,alex,lokesh,brian,lokesh);</div><div class="line"> </div><div class="line">        <span class="comment">// Get distinct only</span></div><div class="line">        List&lt;Person&gt; distinctElements = list.stream().filter(distinctByKey(p -&gt; p.getId())).collect(Collectors.toList());</div><div class="line"> </div><div class="line">        <span class="comment">// Let's verify distinct elements</span></div><div class="line">        System.out.println(distinctElements);</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Predicate&lt;T&gt; <span class="title">distinctByKey</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, Object&gt; keyExtractor)</span></span></div><div class="line">    &#123;</div><div class="line">        Map&lt;Object, Boolean&gt; map = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</div><div class="line">        <span class="keyword">return</span> t -&gt; map.putIfAbsent(keyExtractor.apply(t), Boolean.TRUE) == <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"> </div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></div><div class="line">&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(Integer id, String fname, String lname)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">        <span class="keyword">this</span>.fname = fname;</div><div class="line">        <span class="keyword">this</span>.lname = lname;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">private</span> Integer id;</div><div class="line">    <span class="keyword">private</span> String fname;</div><div class="line">    <span class="keyword">private</span> String lname;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFname</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> fname;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFname</span><span class="params">(String fname)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.fname = fname;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getLname</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> lname;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLname</span><span class="params">(String lname)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.lname = lname;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"Person [id="</span> + id + <span class="string">", fname="</span> + fname + <span class="string">", lname="</span> + lname + <span class="string">"]"</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="max-å’Œ-min"><a href="#max-å’Œ-min" class="headerlink" title="max() å’Œ min()"></a>max() å’Œ min()</h3><p>å¯¹äº<code>maxå’Œmin</code>ï¼Œåªéœ€è¦ç»™ä»–ä»¬ä¼ é€’ä¸€ä¸ª<code>Comparator</code>ï¼Œå°±å¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œè·å–æœ€å¤§å’Œæœ€å°å€¼ã€‚</p>
<p>è·å–æœ€å¤§ï¼Œæœ€å°å¾—æ—¥æœŸ<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">LocalDate start = LocalDate.now();</div><div class="line">LocalDate end = LocalDate.now().plusMonths(<span class="number">1</span>).with(TemporalAdjusters.lastDayOfMonth());</div><div class="line">List&lt;LocalDate&gt; dates = Stream.iterate(start, date -&gt; date.plusDays(<span class="number">1</span>))</div><div class="line">                        .limit(ChronoUnit.DAYS.between(start, end))</div><div class="line">                        .collect(Collectors.toList());</div><div class="line"> </div><div class="line"><span class="comment">// Get Min or Max Date</span></div><div class="line">LocalDate maxDate = dates.stream().max( Comparator.comparing( LocalDate::toEpochDay ) ).get();</div><div class="line">LocalDate minDate = dates.stream().min( Comparator.comparing( LocalDate::toEpochDay ) ).get();</div><div class="line"> </div><div class="line">System.out.println(<span class="string">"maxDate = "</span> + maxDate);</div><div class="line">System.out.println(<span class="string">"minDate = "</span> + minDate);</div></pre></td></tr></table></figure></p>
<p>è·å–æœ€å¤§æ•°å’Œæœ€å°æ•°</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Integer maxNumber = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</div><div class="line">                    .max(Comparator.comparing(Integer::valueOf)).get();</div><div class="line">Integer minNumber = Stream.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</div><div class="line">                    .min(Comparator.comparing(Integer::valueOf)).get();</div><div class="line"> </div><div class="line">System.out.println(<span class="string">"maxNumber = "</span> + maxNumber);</div><div class="line">System.out.println(<span class="string">"minNumber = "</span> + minNumber);</div></pre></td></tr></table></figure>
<p>è·å–æœ€å¤§çš„charæˆ–è€…String<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">String maxChar = Stream.of(<span class="string">"H"</span>, <span class="string">"T"</span>, <span class="string">"D"</span>, <span class="string">"I"</span>, <span class="string">"J"</span>).max(Comparator.comparing(String::valueOf)).get();</div><div class="line">String minChar = Stream.of(<span class="string">"H"</span>, <span class="string">"T"</span>, <span class="string">"D"</span>, <span class="string">"I"</span>, <span class="string">"J"</span>).min(Comparator.comparing(String::valueOf)).get();</div><div class="line"> </div><div class="line">System.out.println(<span class="string">"maxChar = "</span> + maxChar);</div><div class="line">System.out.println(<span class="string">"minChar = "</span> + minChar);</div></pre></td></tr></table></figure></p>
<p>è·å–æœ€å¤§å’Œæœ€å°çš„å¯¹è±¡<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">List&lt;Employee&gt; emps = <span class="keyword">new</span> ArrayList&lt;Employee&gt;();</div><div class="line"> </div><div class="line">emps.add(<span class="keyword">new</span> Employee(<span class="number">1</span>, <span class="string">"Lokesh"</span>, <span class="number">36</span>));</div><div class="line">emps.add(<span class="keyword">new</span> Employee(<span class="number">2</span>, <span class="string">"Alex"</span>, <span class="number">46</span>));</div><div class="line">emps.add(<span class="keyword">new</span> Employee(<span class="number">3</span>, <span class="string">"Brian"</span>, <span class="number">52</span>));</div><div class="line"> </div><div class="line">Comparator&lt;Employee&gt; comparator = Comparator.comparing(Employee::getAge);</div><div class="line"> </div><div class="line"><span class="comment">// Get Min or Max Object</span></div><div class="line">Employee minObject = emps.stream().min(comparator).get();</div><div class="line">Employee maxObject = emps.stream().max(comparator).get();</div><div class="line"> </div><div class="line">System.out.println(<span class="string">"minObject = "</span> + minObject);</div><div class="line">System.out.println(<span class="string">"maxObject = "</span> + maxObject);</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</div><div class="line">    <span class="keyword">private</span> String name;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">int</span> id, String name, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>();</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> id;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.id = id;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> name;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.name = name;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> age;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.age = age;</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">        StringBuilder str = <span class="keyword">null</span>;</div><div class="line">        str = <span class="keyword">new</span> StringBuilder();</div><div class="line">        str.append(<span class="string">"Id:- "</span> + getId() + <span class="string">" Name:- "</span> + getName() + <span class="string">" Age:- "</span> + getAge());</div><div class="line">        <span class="keyword">return</span> str.toString();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="Parallel-Streams-å¹¶è¡Œæµ"><a href="#Parallel-Streams-å¹¶è¡Œæµ" class="headerlink" title="Parallel-Streams å¹¶è¡Œæµ"></a>Parallel-Streams å¹¶è¡Œæµ</h3><p>å‰é¢ç« èŠ‚æˆ‘ä»¬è¯´è¿‡ï¼Œ<code>stream</code> æµæ˜¯æ”¯æŒ<strong>é¡ºåº</strong>å’Œ<strong>å¹¶è¡Œ</strong>çš„ã€‚é¡ºåºæµæ“ä½œæ˜¯å•çº¿ç¨‹æ“ä½œï¼Œè€Œå¹¶è¡Œæµæ˜¯é€šè¿‡å¤šçº¿ç¨‹æ¥å¤„ç†çš„ï¼Œèƒ½å¤Ÿå……åˆ†åˆ©ç”¨ç‰©ç†æœºå¤šæ ¸ CPU çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶å¤„ç†é€Ÿåº¦æ›´å¿«ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å« 1000000 UUID list é›†åˆã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> max = <span class="number">1000000</span>;</div><div class="line">List&lt;String&gt; values = <span class="keyword">new</span> ArrayList&lt;&gt;(max);</div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; max; i++) &#123;</div><div class="line">    UUID uuid = UUID.randomUUID();</div><div class="line">    values.add(uuid.toString());</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åˆ†åˆ«é€šè¿‡é¡ºåºæµå’Œå¹¶è¡Œæµï¼Œå¯¹è¿™ä¸ª list è¿›è¡Œæ’åºï¼Œæµ‹ç®—è€—æ—¶:</p>
<h4 id="é¡ºåºæµæ’åº"><a href="#é¡ºåºæµæ’åº" class="headerlink" title="é¡ºåºæµæ’åº"></a>é¡ºåºæµæ’åº</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// çº³ç§’</span></div><div class="line"><span class="keyword">long</span> t0 = System.nanoTime();</div><div class="line"></div><div class="line"><span class="keyword">long</span> count = values.stream().sorted().count();</div><div class="line">System.out.println(count);</div><div class="line"></div><div class="line"><span class="keyword">long</span> t1 = System.nanoTime();</div><div class="line"></div><div class="line"><span class="comment">// çº³ç§’è½¬å¾®ç§’</span></div><div class="line"><span class="keyword">long</span> millis = TimeUnit.NANOSECONDS.toMillis(t1 - t0);</div><div class="line">System.out.println(String.format(<span class="string">"é¡ºåºæµæ’åºè€—æ—¶: %d ms"</span>, millis));</div><div class="line"></div><div class="line"><span class="comment">// é¡ºåºæµæ’åºè€—æ—¶: 899 ms</span></div></pre></td></tr></table></figure>
<h4 id="å¹¶è¡Œæµæ’åº"><a href="#å¹¶è¡Œæµæ’åº" class="headerlink" title="å¹¶è¡Œæµæ’åº"></a>å¹¶è¡Œæµæ’åº</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// çº³ç§’</span></div><div class="line"><span class="keyword">long</span> t0 = System.nanoTime();</div><div class="line"></div><div class="line"><span class="keyword">long</span> count = values.parallelStream().sorted().count();</div><div class="line">System.out.println(count);</div><div class="line"></div><div class="line"><span class="keyword">long</span> t1 = System.nanoTime();</div><div class="line"></div><div class="line"><span class="comment">// çº³ç§’è½¬å¾®ç§’</span></div><div class="line"><span class="keyword">long</span> millis = TimeUnit.NANOSECONDS.toMillis(t1 - t0);</div><div class="line">System.out.println(String.format(<span class="string">"å¹¶è¡Œæµæ’åºè€—æ—¶: %d ms"</span>, millis));</div><div class="line"></div><div class="line"><span class="comment">// å¹¶è¡Œæµæ’åºè€—æ—¶: 472 ms</span></div></pre></td></tr></table></figure>
<p>æ­£å¦‚ä½ æ‰€è§ï¼ŒåŒæ ·çš„é€»è¾‘å¤„ç†ï¼Œé€šè¿‡å¹¶è¡Œæµï¼Œæˆ‘ä»¬çš„æ€§èƒ½æå‡äº†è¿‘ <strong>50%</strong>ã€‚å®Œæˆè¿™ä¸€åˆ‡ï¼Œæˆ‘ä»¬éœ€è¦åšçš„ä»…ä»…æ˜¯å°† <code>stream</code> æ”¹æˆäº† <code>parallelStream</code>ã€‚</p>
<h2 id="Map-é›†åˆ"><a href="#Map-é›†åˆ" class="headerlink" title="Map é›†åˆ"></a>Map é›†åˆ</h2><p>å‰é¢å·²ç»æåˆ°è¿‡ <code>Map</code> æ˜¯ä¸æ”¯æŒ <code>Stream</code> æµçš„ï¼Œå› ä¸º <code>Map</code> æ¥å£å¹¶æ²¡æœ‰åƒ <code>Collection</code> æ¥å£é‚£æ ·ï¼Œå®šä¹‰äº† <code>stream()</code> æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶ <code>key</code>, <code>values</code>, <code>entry</code> ä½¿ç”¨<br>æµæ“ä½œï¼Œå¦‚ <code>map.keySet().stream()</code>, <code>map.values().stream()</code> å’Œ <code>map.entrySet().stream()</code>.</p>
<p>å¦å¤–, JDK 8 ä¸­å¯¹ <code>map</code> æä¾›äº†ä¸€äº›å…¶ä»–æ–°ç‰¹æ€§:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Map&lt;Integer, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line"></div><div class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">    <span class="comment">// ä¸è€ç‰ˆä¸åŒçš„æ˜¯ï¼ŒputIfAbent() æ–¹æ³•åœ¨ put ä¹‹å‰ï¼Œ</span></div><div class="line">    <span class="comment">// ä¼šåˆ¤æ–­ key æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ç›´æ¥è¿”å› value, å¦åˆ™ put, å†è¿”å› value</span></div><div class="line">    map.putIfAbsent(i, <span class="string">"val"</span> + i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// forEach å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹ map è¿›è¡Œéå†æ“ä½œ</span></div><div class="line">map.forEach((key, value) -&gt; System.out.println(value));</div></pre></td></tr></table></figure>
<p>é™¤äº†ä¸Šé¢çš„ <code>putIfAbsent()</code> å’Œ <code>forEach()</code> å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æŸä¸ª <code>key</code> çš„å€¼åšç›¸å…³æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// computeIfPresent(), å½“ key å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåšç›¸å…³å¤„ç†</span></div><div class="line"><span class="comment">// å¦‚ä¸‹ï¼šå¯¹ key ä¸º 3 çš„å€¼ï¼Œå†…éƒ¨ä¼šå…ˆåˆ¤æ–­å€¼æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ï¼Œåˆ™åš value + key çš„æ‹¼æ¥æ“ä½œ</span></div><div class="line">map.computeIfPresent(<span class="number">3</span>, (num, val) -&gt; val + num);</div><div class="line">map.get(<span class="number">3</span>);             <span class="comment">// val33</span></div><div class="line"></div><div class="line"><span class="comment">// å…ˆåˆ¤æ–­ key ä¸º 9 çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ï¼Œåˆ™åšåˆ é™¤æ“ä½œ</span></div><div class="line">map.computeIfPresent(<span class="number">9</span>, (num, val) -&gt; <span class="keyword">null</span>);</div><div class="line">map.containsKey(<span class="number">9</span>);     <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="comment">// computeIfAbsent(), å½“ key ä¸å­˜åœ¨æ—¶ï¼Œæ‰ä¼šåšç›¸å…³å¤„ç†</span></div><div class="line"><span class="comment">// å¦‚ä¸‹ï¼šå…ˆåˆ¤æ–­ key ä¸º 23 çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ </span></div><div class="line">map.computeIfAbsent(<span class="number">23</span>, num -&gt; <span class="string">"val"</span> + num);</div><div class="line">map.containsKey(<span class="number">23</span>);    <span class="comment">// true</span></div><div class="line"></div><div class="line"><span class="comment">// å…ˆåˆ¤æ–­ key ä¸º 3 çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨ï¼Œåˆ™ä¸åšä»»ä½•å¤„ç†</span></div><div class="line">map.computeIfAbsent(<span class="number">3</span>, num -&gt; <span class="string">"bam"</span>);</div><div class="line">map.get(<span class="number">3</span>);             <span class="comment">// val33</span></div></pre></td></tr></table></figure>
<p>å…³äºåˆ é™¤æ“ä½œï¼ŒJDK 8 ä¸­æä¾›äº†èƒ½å¤Ÿæ–°çš„ <code>remove()</code> API:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">map.remove(<span class="number">3</span>, <span class="string">"val3"</span>);</div><div class="line">map.get(<span class="number">3</span>);             <span class="comment">// val33</span></div><div class="line"></div><div class="line">map.remove(<span class="number">3</span>, <span class="string">"val33"</span>);</div><div class="line">map.get(<span class="number">3</span>);             <span class="comment">// null</span></div></pre></td></tr></table></figure>
<p>å¦‚ä¸Šä»£ç ï¼Œåªæœ‰å½“ç»™å®šçš„ <code>key</code> å’Œ <code>value</code> å®Œå…¨åŒ¹é…æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œåˆ é™¤æ“ä½œã€‚</p>
<p>å…³äºæ·»åŠ æ–¹æ³•ï¼ŒJDK 8 ä¸­æä¾›äº†å¸¦æœ‰é»˜è®¤å€¼çš„ <code>getOrDefault()</code> æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è‹¥ key 42 ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› not found</span></div><div class="line">map.getOrDefault(<span class="number">42</span>, <span class="string">"not found"</span>);  <span class="comment">// not found</span></div></pre></td></tr></table></figure>
<p>å¯¹äº <code>value</code> çš„åˆå¹¶æ“ä½œä¹Ÿå˜å¾—æ›´åŠ ç®€å•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// merge æ–¹æ³•ï¼Œä¼šå…ˆåˆ¤æ–­è¿›è¡Œåˆå¹¶çš„ key æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œåˆ™ä¼šæ·»åŠ å…ƒç´ </span></div><div class="line">map.merge(<span class="number">9</span>, <span class="string">"val9"</span>, (value, newValue) -&gt; value.concat(newValue));</div><div class="line">map.get(<span class="number">9</span>);             <span class="comment">// val9</span></div><div class="line"></div><div class="line"><span class="comment">// è‹¥ key çš„å…ƒç´ å­˜åœ¨ï¼Œåˆ™å¯¹ value æ‰§è¡Œæ‹¼æ¥æ“ä½œ</span></div><div class="line">map.merge(<span class="number">9</span>, <span class="string">"concat"</span>, (value, newValue) -&gt; value.concat(newValue));</div><div class="line">map.get(<span class="number">9</span>);             <span class="comment">// val9concat</span></div></pre></td></tr></table></figure>
<h2 id="æ–°çš„æ—¥æœŸ-API"><a href="#æ–°çš„æ—¥æœŸ-API" class="headerlink" title="æ–°çš„æ—¥æœŸ API"></a>æ–°çš„æ—¥æœŸ API</h2><p>Java 8 ä¸­åœ¨åŒ… <code>java.time</code> ä¸‹æ·»åŠ äº†æ–°çš„æ—¥æœŸ API. å®ƒå’Œ <a href="http://www.joda.org/joda-time/" target="_blank" rel="external">Joda-Time</a> åº“ç›¸ä¼¼ï¼Œä½†åˆä¸å®Œå…¨ç›¸åŒã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šé€šè¿‡ä¸€äº›ç¤ºä¾‹ä»£ç ä»‹ç»ä¸€ä¸‹æ–° API ä¸­<br>æœ€å…³é”®çš„ç‰¹æ€§ï¼š</p>
<h3 id="Clock"><a href="#Clock" class="headerlink" title="Clock"></a>Clock</h3><p><code>Clock</code> æä¾›å¯¹å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„è®¿é—®ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ¥æ›¿ä»£ <code>System.currentTimeMillis()</code> æ–¹æ³•ã€‚å¦å¤–ï¼Œé€šè¿‡ <code>clock.instant()</code> èƒ½å¤Ÿè·å–ä¸€ä¸ª <code>instant</code> å®ä¾‹ï¼Œ<br>æ­¤å®ä¾‹èƒ½å¤Ÿæ–¹ä¾¿åœ°è½¬æ¢æˆè€ç‰ˆæœ¬ä¸­çš„ <code>java.util.Date</code> å¯¹è±¡ã€‚ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Clock clock = Clock.systemDefaultZone();</div><div class="line"><span class="keyword">long</span> millis = clock.millis();</div><div class="line"></div><div class="line">Instant instant = clock.instant();</div><div class="line">Date legacyDate = Date.from(instant);   <span class="comment">// è€ç‰ˆæœ¬ java.util.Date</span></div></pre></td></tr></table></figure>
<h3 id="Timezones-æ—¶åŒº"><a href="#Timezones-æ—¶åŒº" class="headerlink" title="Timezones æ—¶åŒº"></a>Timezones æ—¶åŒº</h3><p><code>ZoneId</code> ä»£è¡¨æ—¶åŒºç±»ã€‚é€šè¿‡é™æ€å·¥å‚æ–¹æ³•æ–¹ä¾¿åœ°è·å–å®ƒï¼Œå…¥å‚æˆ‘ä»¬å¯ä»¥ä¼ å…¥æŸä¸ªæ—¶åŒºç¼–ç ã€‚å¦å¤–ï¼Œæ—¶åŒºç±»è¿˜å®šä¹‰äº†ä¸€ä¸ªåç§»é‡ï¼Œç”¨æ¥åœ¨å½“å‰æ—¶åˆ»æˆ–æŸæ—¶é—´<br>ä¸ç›®æ ‡æ—¶åŒºæ—¶é—´ä¹‹é—´è¿›è¡Œè½¬æ¢ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">System.out.println(ZoneId.getAvailableZoneIds());</div><div class="line"><span class="comment">// prints all available timezone ids</span></div><div class="line"></div><div class="line">ZoneId zone1 = ZoneId.of(<span class="string">"Europe/Berlin"</span>);</div><div class="line">ZoneId zone2 = ZoneId.of(<span class="string">"Brazil/East"</span>);</div><div class="line">System.out.println(zone1.getRules());</div><div class="line">System.out.println(zone2.getRules());</div><div class="line"></div><div class="line"><span class="comment">// ZoneRules[currentStandardOffset=+01:00]</span></div><div class="line"><span class="comment">// ZoneRules[currentStandardOffset=-03:00]</span></div></pre></td></tr></table></figure>
<h3 id="LocalTime"><a href="#LocalTime" class="headerlink" title="LocalTime"></a>LocalTime</h3><p><code>LocalTime</code> è¡¨ç¤ºä¸€ä¸ªæ²¡æœ‰æŒ‡å®šæ—¶åŒºçš„æ—¶é—´ç±»ï¼Œä¾‹å¦‚ï¼Œ<code>10 p.m</code>.æˆ–è€… <code>17ï¼š30:15</code>ï¼Œä¸‹é¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œå°†ä¼šä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„<br>æ—¶åŒºå¯¹è±¡åˆ›å»ºä¸¤ä¸ª <code>LocalTime</code>ã€‚ç„¶åæˆ‘ä»¬ä¼šæ¯”è¾ƒä¸¤ä¸ªæ—¶é—´ï¼Œå¹¶è®¡ç®—å®ƒä»¬ä¹‹é—´çš„å°æ—¶å’Œåˆ†é’Ÿçš„ä¸åŒã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">LocalTime now1 = LocalTime.now(zone1);</div><div class="line">LocalTime now2 = LocalTime.now(zone2);</div><div class="line"></div><div class="line">System.out.println(now1.isBefore(now2));  <span class="comment">// false</span></div><div class="line"></div><div class="line"><span class="keyword">long</span> hoursBetween = ChronoUnit.HOURS.between(now1, now2);</div><div class="line"><span class="keyword">long</span> minutesBetween = ChronoUnit.MINUTES.between(now1, now2);</div><div class="line"></div><div class="line">System.out.println(hoursBetween);       <span class="comment">// -3</span></div><div class="line">System.out.println(minutesBetween);     <span class="comment">// -239</span></div></pre></td></tr></table></figure>
<p><code>LocalTime</code> æä¾›å¤šä¸ªé™æ€å·¥å‚æ–¹æ³•ï¼Œç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–å¯¹æ—¶é—´å¯¹è±¡å®ä¾‹çš„åˆ›å»ºå’Œæ“ä½œï¼ŒåŒ…æ‹¬å¯¹æ—¶é—´å­—ç¬¦ä¸²è¿›è¡Œè§£æçš„æ“ä½œç­‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">LocalTime late = LocalTime.of(<span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>);</div><div class="line">System.out.println(late);       <span class="comment">// 23:59:59</span></div><div class="line"></div><div class="line">DateTimeFormatter germanFormatter =</div><div class="line">    DateTimeFormatter</div><div class="line">        .ofLocalizedTime(FormatStyle.SHORT)</div><div class="line">        .withLocale(Locale.GERMAN);</div><div class="line"></div><div class="line">LocalTime leetTime = LocalTime.parse(<span class="string">"13:37"</span>, germanFormatter);</div><div class="line">System.out.println(leetTime);   <span class="comment">// 13:37</span></div></pre></td></tr></table></figure>
<h2 id="LocalDate"><a href="#LocalDate" class="headerlink" title="LocalDate"></a>LocalDate</h2><p><code>LocalDate</code> æ˜¯ä¸€ä¸ªæ—¥æœŸå¯¹è±¡ï¼Œä¾‹å¦‚ï¼š<code>2014-03-11</code>ã€‚å®ƒå’Œ <code>LocalTime</code> ä¸€æ ·æ˜¯ä¸ª <code>final</code> ç±»å‹å¯¹è±¡ã€‚ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡åŠ å‡æ—¥ï¼Œæœˆï¼Œå¹´ç­‰æ¥è®¡ç®—ä¸€ä¸ªæ–°çš„æ—¥æœŸã€‚</p>
<blockquote>
<p><code>LocalDate</code>, <code>LocalTime</code>, å› ä¸ºæ˜¯ <code>final</code> ç±»å‹çš„å¯¹è±¡ï¼Œæ¯ä¸€æ¬¡æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ—¶é—´å¯¹è±¡ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">LocalDate today = LocalDate.now();</div><div class="line"><span class="comment">// ä»Šå¤©åŠ ä¸€å¤©</span></div><div class="line">LocalDate tomorrow = today.plus(<span class="number">1</span>, ChronoUnit.DAYS);</div><div class="line"><span class="comment">// æ˜å¤©å‡ä¸¤å¤©</span></div><div class="line">LocalDate yesterday = tomorrow.minusDays(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">// 2014 å¹´ä¸ƒæœˆçš„ç¬¬å››å¤©</span></div><div class="line">LocalDate independenceDay = LocalDate.of(<span class="number">2014</span>, Month.JULY, <span class="number">4</span>);</div><div class="line">DayOfWeek dayOfWeek = independenceDay.getDayOfWeek();</div><div class="line">System.out.println(dayOfWeek);    <span class="comment">// æ˜ŸæœŸäº”</span></div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥ç›´æ¥è§£ææ—¥æœŸå­—ç¬¦ä¸²ï¼Œç”Ÿæˆ <code>LocalDate</code> å®ä¾‹ã€‚ï¼ˆå’Œ <code>LocalTime</code> æ“ä½œä¸€æ ·ç®€å•ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">DateTimeFormatter germanFormatter =</div><div class="line">    DateTimeFormatter</div><div class="line">        .ofLocalizedDate(FormatStyle.MEDIUM)</div><div class="line">        .withLocale(Locale.GERMAN);</div><div class="line"></div><div class="line">LocalDate xmas = LocalDate.parse(<span class="string">"24.12.2014"</span>, germanFormatter);</div><div class="line">System.out.println(xmas);   <span class="comment">// 2014-12-24</span></div></pre></td></tr></table></figure>
<h3 id="LocalDateTime"><a href="#LocalDateTime" class="headerlink" title="LocalDateTime"></a>LocalDateTime</h3><p><code>LocalDateTime</code> æ˜¯ä¸€ä¸ª<strong>æ—¥æœŸ-æ—¶é—´</strong>å¯¹è±¡ã€‚ä½ ä¹Ÿå¯ä»¥å°†å…¶çœ‹æˆæ˜¯ <code>LocalDate</code> å’Œ <code>LocalTime</code> çš„ç»“åˆä½“ã€‚æ“ä½œä¸Šï¼Œä¹Ÿå¤§è‡´ç›¸åŒã€‚</p>
<blockquote>
<p><code>LocalDateTime</code> åŒæ ·æ˜¯ä¸€ä¸ª <code>final</code> ç±»å‹å¯¹è±¡ã€‚</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">LocalDateTime sylvester = LocalDateTime.of(<span class="number">2014</span>, Month.DECEMBER, <span class="number">31</span>, <span class="number">23</span>, <span class="number">59</span>, <span class="number">59</span>);</div><div class="line"></div><div class="line">DayOfWeek dayOfWeek = sylvester.getDayOfWeek();</div><div class="line">System.out.println(dayOfWeek);      <span class="comment">// æ˜ŸæœŸä¸‰</span></div><div class="line"></div><div class="line">Month month = sylvester.getMonth();</div><div class="line">System.out.println(month);          <span class="comment">// åäºŒæœˆ</span></div><div class="line"></div><div class="line"><span class="comment">// è·å–æ”¹æ—¶é—´æ˜¯è¯¥å¤©ä¸­çš„ç¬¬å‡ åˆ†é’Ÿ</span></div><div class="line"><span class="keyword">long</span> minuteOfDay = sylvester.getLong(ChronoField.MINUTE_OF_DAY);</div><div class="line">System.out.println(minuteOfDay);    <span class="comment">// 1439</span></div></pre></td></tr></table></figure>
<p>å¦‚æœå†åŠ ä¸Šçš„æ—¶åŒºä¿¡æ¯ï¼Œ<code>LocalDateTime</code> è¿˜èƒ½å¤Ÿè¢«è½¬æ¢æˆ <code>Instance</code> å®ä¾‹ã€‚<code>Instance</code> èƒ½å¤Ÿè¢«è½¬æ¢æˆè€ç‰ˆæœ¬ä¸­ <code>java.util.Date</code> å¯¹è±¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Instant instant = sylvester</div><div class="line">        .atZone(ZoneId.systemDefault())</div><div class="line">        .toInstant();</div><div class="line"></div><div class="line">Date legacyDate = Date.from(instant);</div><div class="line">System.out.println(legacyDate);     <span class="comment">// Wed Dec 31 23:59:59 CET 2014</span></div></pre></td></tr></table></figure>
<p>æ ¼å¼åŒ– <code>LocalDateTime</code> å¯¹è±¡å°±å’Œæ ¼å¼åŒ– LocalDate æˆ–è€… LocalTime ä¸€æ ·ã€‚é™¤äº†ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼ä»¥å¤–ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ ¼å¼åŒ–è¾“å‡ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">DateTimeFormatter formatter =</div><div class="line">    DateTimeFormatter</div><div class="line">        .ofPattern(<span class="string">"MMM dd, yyyy - HH:mm"</span>);</div><div class="line"></div><div class="line">LocalDateTime parsed = LocalDateTime.parse(<span class="string">"Nov 03, 2014 - 07:13"</span>, formatter);</div><div class="line">String string = formatter.format(parsed);</div><div class="line">System.out.println(string);     <span class="comment">// Nov 03, 2014 - 07:13</span></div></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„ï¼šå’Œ <code>java.text.NumberFormat</code> ä¸åŒï¼Œæ–°çš„ <code>DateTimeFormatter</code> ç±»æ˜¯ <code>final</code> ç±»å‹çš„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚æ›´å¤šç»†èŠ‚è¯·æŸ¥çœ‹<a href="http://download.java.net/jdk8/docs/api/java/time/format/DateTimeFormatter.html" target="_blank" rel="external">è¿™é‡Œ</a></p>
</blockquote>
<h2 id="Annotations-æ³¨è§£"><a href="#Annotations-æ³¨è§£" class="headerlink" title="Annotations æ³¨è§£"></a>Annotations æ³¨è§£</h2><p>åœ¨ Java 8 ä¸­ï¼Œæ³¨è§£æ˜¯å¯ä»¥é‡å¤çš„ã€‚è®©æˆ‘é€šè¿‡ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼Œæ¥çœ‹çœ‹åˆ°åº•æ˜¯å’‹å›äº‹ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªåŒ…è£…æ³¨è§£ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªæœ‰ç€å®é™…æ³¨è§£çš„æ•°ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@interface</span> Hints &#123;</div><div class="line">    Hint[] value();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">@Repeatable</span>(Hints.class)</div><div class="line"><span class="meta">@interface</span> Hint &#123;</div><div class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Java 8 ä¸­ï¼Œé€šè¿‡ <code>@Repeatable</code>ï¼Œå…è®¸æˆ‘ä»¬å¯¹åŒä¸€ä¸ªç±»ä½¿ç”¨å¤šé‡æ³¨è§£ï¼š</p>
<p>ç¬¬ä¸€ç§å½¢æ€ï¼šä½¿ç”¨æ³¨è§£å®¹å™¨ï¼ˆè€æ–¹æ³•ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Hints</span>(&#123;<span class="meta">@Hint</span>(<span class="string">"hint1"</span>), <span class="meta">@Hint</span>(<span class="string">"hint2"</span>)&#125;)</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒç§å½¢æ€ï¼šä½¿ç”¨å¯é‡å¤æ³¨è§£ï¼ˆæ–°æ–¹æ³•ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Hint</span>(<span class="string">"hint1"</span>)</div><div class="line"><span class="meta">@Hint</span>(<span class="string">"hint2"</span>)</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;&#125;</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨ç¬¬äºŒç§å½¢æ€ï¼ŒJava ç¼–è¯‘å™¨èƒ½å¤Ÿåœ¨å†…éƒ¨è‡ªåŠ¨å¯¹ <code>@Hint</code> è¿›è¡Œè®¾ç½®ã€‚è¿™å¯¹äºéœ€è¦é€šè¿‡åå°„æ¥è¯»å–æ³¨è§£ä¿¡æ¯æ—¶ï¼Œæ˜¯éå¸¸é‡è¦çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Hint hint = Person.class.getAnnotation(Hint.class);</div><div class="line">System.out.println(hint);                   <span class="comment">// null</span></div><div class="line"></div><div class="line">Hints hints1 = Person.class.getAnnotation(Hints.class);</div><div class="line">System.out.println(hints1.value().length);  <span class="comment">// 2</span></div><div class="line"></div><div class="line">Hint[] hints2 = Person.class.getAnnotationsByType(Hint.class);</div><div class="line">System.out.println(hints2.length);          <span class="comment">// 2</span></div></pre></td></tr></table></figure>
<p>å°½ç®¡æˆ‘ä»¬ç»å¯¹ä¸ä¼šåœ¨ <code>Person</code> ç±»ä¸Šå£°æ˜ <code>@Hints</code> æ³¨è§£ï¼Œä½†æ˜¯å®ƒçš„ä¿¡æ¯ä»ç„¶æ˜¯å¯ä»¥é€šè¿‡ <code>getAnnotation(Hints.class)</code> æ¥è¯»å–çš„ã€‚å¹¶ä¸”ï¼Œ<code>getAnnotationsByType</code> æ–¹æ³•ä¼šæ›´æ–¹ä¾¿ï¼Œå› ä¸ºå®ƒèµ‹äºˆäº†æ‰€æœ‰ <code>@Hints</code> æ³¨è§£æ ‡æ³¨çš„æ–¹æ³•ç›´æ¥çš„è®¿é—®æƒé™ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE_PARAMETER, ElementType.TYPE_USE&#125;)</div><div class="line"><span class="meta">@interface</span> MyAnnotation &#123;&#125;</div></pre></td></tr></table></figure>
<h2 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h2><p>Java 8 æ–°ç‰¹æ€§çš„ç¼–ç¨‹æŒ‡å—åˆ°æ­¤å°±å‘Šä¸€æ®µè½äº†ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šå†…å®¹éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶å’Œè¯´æ˜ã€‚è¿™å°±éœ€è¦é è¯»è€…æ‚¨æ¥å¯¹ <code>JDK 8</code> è¿›ä¸€æ­¥æ¢ç©¶äº†ï¼Œä¾‹å¦‚ï¼š<code>Arrays.parallelSort</code>, <code>StampedLock</code> å’Œ <code>CompletableFuture</code> ç­‰ç­‰ï¼Œæˆ‘è¿™é‡Œä¹Ÿä»…æ˜¯èµ·åˆ°æŠ›ç –å¼•ç‰çš„ä½œç”¨è€Œå·²ã€‚</p>
<p>æœ€åï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªè®²è§£èƒ½å¤Ÿå¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿå¸Œæœ›æ‚¨é˜…è¯»æ„‰å¿«ã€‚</p>

      
      
        <div class="page-reward">
          <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang">èµ</a></p>
          <div class="hide_box"></div>
          <div class="shang_box">
            <a class="shang_close" href="javascript:void(0)" onclick="dashangToggle()">Ã—</a>
            <div class="shang_tit">
              <p>å¦‚æœæ–‡ç« å¯¹æ‚¨æœ‰ç”¨è¯·éšæ„æ‰“èµï¼</p>
            </div>
            <div class="shang_payimg">
              <img src="/img/alipayimg.jpg" alt="æ‰«ç æ”¯æŒ" title="æ‰«ä¸€æ‰«" />
            </div>
              <div class="pay_explain">è°¢è°¢æ”¯æŒï¼</div>
            <div class="shang_payselect">
              
                <div class="pay_item checked" data-id="alipay">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/alipay.jpg" alt="æ”¯ä»˜å®" /></span>
                </div>
              
              
                <div class="pay_item" data-id="wechat">
                  <span class="radiobox"></span>
                  <span class="pay_logo"><img src="/img/weChat.jpg" alt="å¾®ä¿¡" /></span>
                </div>
              
            </div>
            <div class="shang_info">
              <p>æ‰“å¼€<span id="shang_pay_txt">æ”¯ä»˜å®</span>æ‰«ä¸€æ‰«ï¼Œå³å¯è¿›è¡Œæ‰«ç æ‰“èµå“¦</p>
            </div>
          </div>
        </div>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js"></script>
        <script type="text/javascript">
          $(".pay_item").click(function(){
            $(this).addClass('checked').siblings('.pay_item').removeClass('checked');
            var dataid=$(this).attr('data-id');
            $(".shang_payimg img").attr("src","/img/"+dataid+"img.jpg");
            $("#shang_pay_txt").text(dataid=="alipay"?"æ”¯ä»˜å®":"å¾®ä¿¡");
          });
          function dashangToggle(){
            
            $(".hide_box").fadeToggle();
            $(".shang_box").fadeToggle();
          }
        </script>
      
    </div>
    
  </div>
  
    
<div style="text-align:center;color: #ccc;font-size:14px;">
------ æœ¬æ–‡ç»“æŸ ------</div>
<br/>
<div style="border: 1px solid black">
<div style="margin-left:10px">
<span style="font-weight:blod">ç‰ˆæƒå£°æ˜</span>
<img src="http://jet-han.oschina.io/img/copyright.png" >
<br/>
<p style="font-size: 10px;line-height: 30px"><a href="http://jet-han.oschina.io/" style="color:#258FC6">Jet's Blog</a> by <a href="http://jet-han.oschina.io/" style="color:#258FC6">Jet Han</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" style="color:#258FC6">Creative Commons BY-NC-ND 4.0 International License</a>.<br/>
ç”±<a href="http://jet-han.oschina.io" style="color:#258FC6"> jet han </a>åˆ›ä½œå¹¶ç»´æŠ¤çš„<a href="http://jet-han.oschina.io" style="color:#258FC6"> jet </a>çš„åšå®¢é‡‡ç”¨<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" style="color:#258FC6">åˆ›ä½œå…±ç”¨ä¿ç•™ç½²å-éå•†ä¸š-ç¦æ­¢æ¼”ç»4.0å›½é™…è®¸å¯è¯</a>ã€‚<br/>
æœ¬æ–‡é¦–å‘äº<a href="http://jet-han.oschina.io/" style="color:#258FC6">Jet</a> çš„åšå®¢ï¼ˆ <a href="http://jet-han.oschina.io/" style="color:#258FC6">http://jet-han.oschina.io/</a> ï¼‰ï¼Œç‰ˆæƒæ‰€æœ‰ï¼Œä¾µæƒå¿…ç©¶ã€‚</p>
</div>

    <div class="copyright">
        <p><span>æœ¬æ–‡æ ‡é¢˜:</span><a href="/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/">jdk8ğŸ’—ç‰¹æ€§</a></p>
        <p><span>æ–‡ç« ä½œè€…:</span><a href="/" title="è®¿é—® Jet çš„ä¸ªäººåšå®¢">Jet</a></p>
        <p><span>å‘å¸ƒæ—¶é—´:</span>2017å¹´12æœˆ12æ—¥ - 16æ—¶11åˆ†</p>
        <p><span>æœ€åæ›´æ–°:</span>2017å¹´12æœˆ12æ—¥ - 16æ—¶11åˆ†</p>
        <p>
            <span>åŸå§‹é“¾æ¥:</span><a class="post-url" href="/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/" title="jdk8ğŸ’—ç‰¹æ€§">http://jethan.bid/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/</a>
            <span class="copy-path" data-clipboard-text="åŸæ–‡: http://jethan.bid/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/ã€€ã€€ä½œè€…: Jet" title="ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æ¥"><i class="fa fa-clipboard"></i></span>
            <script src="/js/clipboard.min.js"></script>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>è®¸å¯åè®®:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" title="ä¸­å›½å¤§é™† (CC BY-NC-SA 3.0 CN)" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 3.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
        </p>
    </div>



<nav id="article-nav">
  
    <a href="/2017/12/17/å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶
        
      </div>
    </a>
  
  
    <a href="/2017/12/05/Cron/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">Cron</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

</div>


  
</article>

    <div id="toc" class="toc-article">
    <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•"><span class="toc-number">1.</span> <span class="toc-text">æ¥å£å†…å…è®¸æ·»åŠ é»˜è®¤å®ç°çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda-è¡¨è¾¾å¼"><span class="toc-number">2.</span> <span class="toc-text">Lambda è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#é»˜è®¤æ–¹æ³•"><span class="toc-number">3.</span> <span class="toc-text">é»˜è®¤æ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‡½æ•°å¼æ¥å£-Functional-Interface"><span class="toc-number">4.</span> <span class="toc-text">å‡½æ•°å¼æ¥å£ Functional Interface</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•"><span class="toc-number">5.</span> <span class="toc-text">å¼•ç”¨ç±»çš„æ„é€ å™¨åŠæ–¹æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda-è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•"><span class="toc-number">6.</span> <span class="toc-text">Lambda è®¿é—®å¤–éƒ¨å˜é‡åŠæ¥å£é»˜è®¤æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®å±€éƒ¨å˜é‡"><span class="toc-number">6.1.</span> <span class="toc-text">è®¿é—®å±€éƒ¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡"><span class="toc-number">6.2.</span> <span class="toc-text">è®¿é—®æˆå‘˜å˜é‡å’Œé™æ€å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•"><span class="toc-number">6.3.</span> <span class="toc-text">è®¿é—®æ¥å£çš„é»˜è®¤æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å†…ç½®çš„å‡½æ•°å¼æ¥å£"><span class="toc-number">7.</span> <span class="toc-text">å†…ç½®çš„å‡½æ•°å¼æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Predicate-æ–­è¨€"><span class="toc-number">7.1.</span> <span class="toc-text">Predicate æ–­è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Function"><span class="toc-number">7.2.</span> <span class="toc-text">Function</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optional"><span class="toc-number">7.3.</span> <span class="toc-text">Optional</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Supplier-ç”Ÿäº§è€…"><span class="toc-number">7.4.</span> <span class="toc-text">Supplier ç”Ÿäº§è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Consumer-æ¶ˆè´¹è€…"><span class="toc-number">7.5.</span> <span class="toc-text">Consumer æ¶ˆè´¹è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Comparator"><span class="toc-number">7.6.</span> <span class="toc-text">Comparator</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Stream-æµ"><span class="toc-number">8.</span> <span class="toc-text">Stream æµ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter-è¿‡æ»¤"><span class="toc-number">8.1.</span> <span class="toc-text">Filter è¿‡æ»¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sorted-æ’åº"><span class="toc-number">8.2.</span> <span class="toc-text">Sorted æ’åº</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#å¹¶è¡Œæ’åº-åªéœ€è¦ä½¿ç”¨-parallelSort-å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚"><span class="toc-number">8.2.1.</span> <span class="toc-text">å¹¶è¡Œæ’åº,åªéœ€è¦ä½¿ç”¨ parallelSort() å³å¯è¿›è¡Œå¹¶è¡Œæ’åºã€‚</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#count-å’Œ-counting-ç»Ÿè®¡æ•°é‡"><span class="toc-number">8.3.</span> <span class="toc-text">count() å’Œ counting() ç»Ÿè®¡æ•°é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map-è½¬æ¢-å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼"><span class="toc-number">8.4.</span> <span class="toc-text">Map è½¬æ¢(å°†Streamä¸­çš„å…ƒç´ ä»ä¸€ç§å½¢å¼è½¬åŒ–ä¸ºå¦ä¸€ç§å½¢å¼)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Match-åŒ¹é…"><span class="toc-number">8.5.</span> <span class="toc-text">Match åŒ¹é…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collect-è½¬æ¢ä¸ºCollection"><span class="toc-number">8.6.</span> <span class="toc-text">collect()è½¬æ¢ä¸ºCollection</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åŸç”Ÿç±»å‹è½¬æ¢"><span class="toc-number">8.6.1.</span> <span class="toc-text">åŸç”Ÿç±»å‹è½¬æ¢</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#toArray-è½¬æ¢ä¸ºæ•°ç»„"><span class="toc-number">8.7.</span> <span class="toc-text">toArray()è½¬æ¢ä¸ºæ•°ç»„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#foreach"><span class="toc-number">8.8.</span> <span class="toc-text">foreach()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸­é—´æ“ä½œ"><span class="toc-number">8.9.</span> <span class="toc-text">ä¸­é—´æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç»ˆæ­¢æ“ä½œ"><span class="toc-number">8.10.</span> <span class="toc-text">ç»ˆæ­¢æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reduce"><span class="toc-number">8.11.</span> <span class="toc-text">reduce()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#distinct"><span class="toc-number">8.12.</span> <span class="toc-text">distinct()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#max-å’Œ-min"><span class="toc-number">8.13.</span> <span class="toc-text">max() å’Œ min()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Parallel-Streams-å¹¶è¡Œæµ"><span class="toc-number">8.14.</span> <span class="toc-text">Parallel-Streams å¹¶è¡Œæµ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#é¡ºåºæµæ’åº"><span class="toc-number">8.14.1.</span> <span class="toc-text">é¡ºåºæµæ’åº</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¹¶è¡Œæµæ’åº"><span class="toc-number">8.14.2.</span> <span class="toc-text">å¹¶è¡Œæµæ’åº</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Map-é›†åˆ"><span class="toc-number">9.</span> <span class="toc-text">Map é›†åˆ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ–°çš„æ—¥æœŸ-API"><span class="toc-number">10.</span> <span class="toc-text">æ–°çš„æ—¥æœŸ API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Clock"><span class="toc-number">10.1.</span> <span class="toc-text">Clock</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Timezones-æ—¶åŒº"><span class="toc-number">10.2.</span> <span class="toc-text">Timezones æ—¶åŒº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LocalTime"><span class="toc-number">10.3.</span> <span class="toc-text">LocalTime</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LocalDate"><span class="toc-number">11.</span> <span class="toc-text">LocalDate</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#LocalDateTime"><span class="toc-number">11.1.</span> <span class="toc-text">LocalDateTime</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Annotations-æ³¨è§£"><span class="toc-number">12.</span> <span class="toc-text">Annotations æ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ç»“è¯­"><span class="toc-number">13.</span> <span class="toc-text">ç»“è¯­</span></a></li></ol>
</div>
<input type="button" id="tocButton" value="éšè—ç›®å½•"  title="ç‚¹å‡»æŒ‰é’®éšè—æˆ–è€…æ˜¾ç¤ºæ–‡ç« ç›®å½•">

<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script>
    var valueHide = "éšè—ç›®å½•";
    var valueShow = "æ˜¾ç¤ºç›®å½•";

    if ($(".left-col").is(":hidden")) {
        $("#tocButton").attr("value", valueShow);
    }
    $("#tocButton").click(function() {
        if ($("#toc").is(":hidden")) {
            $("#tocButton").attr("value", valueHide);
            $("#toc").slideDown(320);
        }
        else {
            $("#tocButton").attr("value", valueShow);
            $("#toc").slideUp(350);
        }
    })
    if ($(".toc").length < 1) {
        $("#toc, #tocButton").hide();
    }
</script>





<div class="bdsharebuttonbox">
	<a href="#" class="fx fa-weibo bds_tsina" data-cmd="tsina" title="åˆ†äº«åˆ°æ–°æµªå¾®åš"></a>
	<a href="#" class="fx fa-weixin bds_weixin" data-cmd="weixin" title="åˆ†äº«åˆ°å¾®ä¿¡"></a>
	<a href="#" class="fx fa-qq bds_sqq" data-cmd="sqq" title="åˆ†äº«åˆ°QQå¥½å‹"></a>
	<a href="#" class="fx fa-facebook-official bds_fbook" data-cmd="fbook" title="åˆ†äº«åˆ°Facebook"></a>
	<a href="#" class="fx fa-twitter bds_twi" data-cmd="twi" title="åˆ†äº«åˆ°Twitter"></a>
	<a href="#" class="fx fa-linkedin bds_linkedin" data-cmd="linkedin" title="åˆ†äº«åˆ°linkedin"></a>
	<a href="#" class="fx fa-files-o bds_copy" data-cmd="copy" title="åˆ†äº«åˆ°å¤åˆ¶ç½‘å€"></a>
</div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>




    
        <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
<div id="lv-container" data-id="city" style="width:90%;margin:5% auto 0 auto;background: #fff;padding: 0 12px;border-radius: 5px;" data-uid="MTAyMC8yOTg3NS82NDQw">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
</div>
<!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->

  



    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/12/17/å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶/" title="ä¸Šä¸€ç¯‡: å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶">
                <i class="fa fa-angle-left"></i>
            </a>
        
        <a title="æ–‡ç« åˆ—è¡¨"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>
        
            <a href="/2017/12/05/Cron/" title="ä¸‹ä¸€ç¯‡: Cron">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>
    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/12/17/å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶/">å¹¶å‘ç¼–ç¨‹ä¹‹synchronizedä¸åŠ é”æœºåˆ¶</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/12/jdk8ğŸ’—ç‰¹æ€§/">jdk8ğŸ’—ç‰¹æ€§</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/Cron/">Cron</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/30/Mybatis-MapperScannerConfigurer/">Mybatis-MapperScannerConfigurer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/28/Mysql-SQLè¯­å¥æ‰§è¡Œ/">Mysql-SQLè¯­å¥æ‰§è¡Œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/28/Mysql-B-Treeç´¢å¼•/">Mysql-B-Treeç´¢å¼•</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/18/å¹¶å‘ç¼–ç¨‹ä¹‹CountDownLatchã€CyclicBarrierå’ŒSemaphore/">å¹¶å‘ç¼–ç¨‹ä¹‹CountDownLatchã€CyclicBarrierå’ŒSemaphore</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/14/Docker/">Docker</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/13/Springä¸­beançš„ç”Ÿå‘½å‘¨æœŸ/">Springä¸­beançš„ç”Ÿå‘½å‘¨æœŸ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/04/æ—¶é—´å¤æ‚åº¦è®¡ç®—æ–¹å¼/">æ—¶é—´å¤æ‚åº¦è®¡ç®—æ–¹å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/08/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/mysqlæ•°æ®åº“å¼•æ“/">mysqlæ•°æ®åº“å¼•æ“</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/å¹¶å‘ç¼–ç¨‹ä¹‹çº¿ç¨‹æ± ThreadPoolExecutor/">å¹¶å‘ç¼–ç¨‹ä¹‹çº¿ç¨‹æ± ThreadPoolExecutor</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/çº¿ç¨‹çš„å®ç°æ–¹å¼/">çº¿ç¨‹çš„å®ç°æ–¹å¼</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/jvmè°ƒä¼˜/">jvmè°ƒä¼˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/web-xmlåŠ è½½é¡ºåº/">web.xmlåŠ è½½é¡ºåº</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/spingä¹‹IOCï¼ŒAOP/">spingä¹‹IOCï¼ŒAOP</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/springäº‹åŠ¡çš„ä¼ æ’­å±æ€§å’Œéš”ç¦»çº§åˆ«/">springäº‹åŠ¡çš„ä¼ æ’­å±æ€§å’Œéš”ç¦»çº§åˆ«</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/05/ä¹è§‚é”ä¸æ‚²è§‚é”åŠåº”ç”¨ä¸¾ä¾‹/">ä¹è§‚é”ä¸æ‚²è§‚é”åŠåº”ç”¨ä¸¾ä¾‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/04/mysqläº‹åŠ¡éš”ç¦»çº§åˆ«/">mysqläº‹åŠ¡éš”ç¦»çº§åˆ«</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/01/equalsã€-å’ŒhashCode/">equalsã€==å’ŒhashCode</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/HashMapå·¥ä½œåŸç†/">HashMapå·¥ä½œåŸç†</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/volatileç”¨æ³•/">volatileç”¨æ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/javaå¸¸é‡æ± /">javaå¸¸é‡æ± </a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/28/stringæ¯”è¾ƒä¹‹â€˜â€™equalsâ€˜â€™å’Œâ€˜â€™==â€˜â€™/">stringæ¯”è¾ƒä¹‹â€˜â€™equalsâ€˜â€™å’Œâ€˜â€™==â€˜â€™</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/26/Springå•ä¾‹æ¨¡å¼ä¸çº¿ç¨‹å®‰å…¨/">Springå•ä¾‹æ¨¡å¼ä¸çº¿ç¨‹å®‰å…¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/26/spring Beançš„ä½œç”¨åŸŸ/">spring Beançš„ä½œç”¨åŸŸ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/26/spring-scope-prototypeä¸singletonåŒºåˆ«/">spring scope prototypeä¸singleton</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/20/jvmå†…å­˜æ¨¡å‹/">jvmå†…å­˜æ¨¡å‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/18/å¹¶å‘ç¼–ç¨‹-çº¿ç¨‹é—´åä½œ/">å¹¶å‘ç¼–ç¨‹-çº¿ç¨‹é—´åä½œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/17/nginxå®‰è£…ä¸ä½¿ç”¨/">nginxå®‰è£…ä¸ä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/16/solrå®‰è£…ä¸ä½¿ç”¨/">solrå®‰è£…ä¸ä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/16/crontabå®‰è£…åŠä½¿ç”¨/">crontabå®‰è£…åŠä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/15/å¤§æ•°æ®å¹³å°-ambari/">å¤§æ•°æ®å¹³å°-ambari</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/10/mysqlé…ç½®è¯¦è§£/">mysqlé…ç½®è¯¦è§£</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/10/æ•°æ®åº“ä¹‹mysql-ä¸€/">æ•°æ®åº“ä¹‹mysql(äºŒ)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/09/google-cloudæ­å»ºvpn/">google-cloudæ­å»ºvpn</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/08/java-IO/">java-IO</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/02/githubæ­å»ºä¸ªäººmavenä»“åº“/">githubæ­å»ºä¸ªäººmavenä»“åº“</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/24/git/">git</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/linuxå¸¸ç”¨æ“ä½œå‘½ä»¤-ä¸€/">linuxå¸¸ç”¨æ“ä½œå‘½ä»¤(ä¸€)</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/19/linuxå¸¸ç”¨æ“ä½œå‘½ä»¤/">linuxå¸¸ç”¨æ“ä½œå‘½ä»¤</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/17/rediså®‰è£…åŠä½¿ç”¨/">rediså®‰è£…åŠä½¿ç”¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/mysqlä¸»ä»å¤‡ä»½/">mysqlä¸»ä»å¤‡ä»½</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/centosåœ¨çº¿æºyumå®‰è£…mysql/">æ•°æ®åº“ä¹‹mysqlï¼ˆä¸€ï¼‰</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/12/Java Generics/">Java Generics</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/30/Markdown-è¯­æ³•è¯´æ˜/">Markdown-è¯­æ³•è¯´æ˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/30/javaå¸¸è§æ’åºç®—æ³•/">javaå¸¸è§æ’åºç®—æ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/29/mysqlç´¢å¼•åŠæŸ¥è¯¢ä¼˜åŒ–/">mysqlç´¢å¼•åŠæŸ¥è¯¢ä¼˜åŒ–</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/28/javaå¸¸ç”¨é›†åˆ/">javaå¸¸ç”¨é›†åˆ/å®¹å™¨</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/é€’å½’å’Œè¿­ä»£/">é€’å½’å’Œè¿­ä»£</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/StringBuilderå’ŒStringBuffer/">StringBuilderå’ŒStringBuffer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/Hexo-NexTä¸»é¢˜æ­å»ºä¸ªäººåšå®¢/">Hexo-NexTä¸»é¢˜æ­å»ºä¸ªäººåšå®¢</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/07/javaåç«¯å¼€å‘é¢è¯•/">javaåç«¯å¼€å‘é¢è¯•</a></li></ul>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
    <script>
        $(".post-list").addClass("toc-article");
        $(".post-list-item a").attr("target","_blank");
        $("#post-nav-button > a:nth-child(2)").click(function() {
            $(".fa-bars, .fa-times").toggle();
            $(".post-list").toggle(300);
            if ($(".toc").length > 0) {
                $("#toc, #tocButton").toggle(200, function() {
                    if ($(".switch-area").is(":visible")) {
                        $("#tocButton").attr("value", valueHide);
                        }
                    })
            }
            else {
            }
        })
    </script>



    <script>
        
    </script>

</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                &copy; 2019 å­¦æµ·æ— æ¶¯
            </div>
            <div class="footer-right">
                <span class="author" itemprop="copyrightHolder">Powered By - Jet</span>
            </div>
        </div>
        

      <div class="total_count">
          æœ¬ç«™å…± <span id="busuanzi_value_site_pv"></span><span id="site_pv">æ¬¡è®¿é—®</span>
          æ‚¨æ˜¯ç¬¬ <span id="busuanzi_value_site_uv"></span><span id="site_uv">ä¸ªå°ä¼™ä¼´</span>
          æœ¬é¡µç´¯è®¡ <span id="busuanzi_value_page_pv"></span><span id="page_pv">æ¬¡é˜…è¯»</span>
          å·²è¿è¡Œ <span id="showDays"></span><span id="show_days">å¤©</span>
      </div>
      <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
      </script>
      <script>
        var birthDay = new Date('05/24/2017');
        var now = new Date();
        var duration = now.getTime() - birthDay.getTime();
        var total= Math.floor(duration / (1000 * 60 * 60 * 24));
        document.getElementById('showDays').innerHTML=total;
      </script>
    </div>
</footer>

    </div>
    <script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>
<!-- ä¼˜æ•ˆssp<script src="http://s.6travel.com/titi126.js"></script>-->

    <script>
        $(document).ready(function() {
            var backgroundnum = 24;
            var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
            $("#mobile-nav").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
            $(".left-col").css({"background-image": backgroundimg,"background-size": "cover","background-position": "center"});
        })
    </script>






  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("{{theme.leancloud_visitors.app_id}}", "{{theme.leancloud_visitors.app_key}}");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments"><i class="fa fa-comments-o"></i></a>
    <a href="#footer"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    $(document).ready(function() {
        if ($("#comments").length < 1) {
            $("#scroll > a:nth-child(2)").hide();
        };
    })
</script>

<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

  <script language="javascript">
    $(function() {
        $("a[title]").each(function() {
            var a = $(this);
            var title = a.attr('title');
            if (title == undefined || title == "") return;
            a.data('title', title).removeAttr('title').hover(

            function() {
                var offset = a.offset();
                $("<div id=\"anchortitlecontainer\"></div>").appendTo($("body")).html(title).css({
                    top: offset.top - a.outerHeight() - 15,
                    left: offset.left + a.outerWidth()/2 + 1
                }).fadeIn(function() {
                    var pop = $(this);
                    setTimeout(function() {
                        pop.remove();
                    }, pop.text().length * 800);
                });
            }, function() {
                $("#anchortitlecontainer").remove();
            });
        });
    });
</script>


    <script type="text/javascript">
      window.onload = function(){
        document.getElementById("search").onclick = function(){
            console.log("search")
            search();
        }
      }
      function search(){
        (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
        (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
        e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
        })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

        _st('install','A1Pz-LKMXbrzcFg2FWi6','2.0.0');
      }
    </script>


    <script type="text/javascript">
   document.oncontextmenu = function(){
     return false;
   }
   document.onkeydown = function(){
    if (event.ctrlKey && window.event.keyCode==67){
    return false;
    }
    if ((window.event.altKey)&& 
     ((window.event.keyCode==37)||   
      (window.event.keyCode==39))){alert("è¯·è®¿é—®ä¸»é¡µ"); 
    event.returnValue=false; 
    } 
if ((event.keyCode==8)||(event.keyCode==116)){//å±è”½ F5 åˆ·æ–°é”® 
    event.keyCode=0; 
    event.returnValue=false; 
    } 
if ((event.ctrlKey)&&(event.keyCode==78)){   //å±è”½ Ctrl+n 
    event.returnValue=false; 
    } 
if ((event.shiftKey)&&(event.keyCode==121)){ //å±è”½ shift+F10 
    event.returnValue=false; 
    }
if (event.keyCode==123){ //å±è”½ F12 
    event.returnValue=false;
    }
   }
  document.body.oncopy = function (){
   return false;
  }
  //ä¸å»ºè®®è¿é€‰ä¸­æ–‡æœ¬éƒ½ä¸è¡Œ
  document.onselectstart = function(){
  //return false;
  }
    </script>


  </div>
</body>
</html>